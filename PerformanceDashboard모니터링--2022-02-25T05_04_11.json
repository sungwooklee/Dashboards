{"title":"Performance Dashboard 모니터링","description":"datadog_demo_keep:true\n\n","widgets":[{"id":2062282333221066,"definition":{"title":"전체 요청 관련","type":"group","background_color":"vivid_orange","show_title":true,"layout_type":"ordered","widgets":[{"id":3147505544697090,"definition":{"title":"TPS(점선:한주전) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:trace.servlet.request.hits{$service}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic"},"display_type":"line"},{"formulas":[{"formula":"week_before(query0)"}],"response_format":"timeseries","queries":[{"query":"sum:trace.servlet.request.hits{$service}.as_rate()","data_source":"metrics","name":"query0"}],"style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":4,"height":4}},{"id":5835034640328388,"definition":{"title":"분당 API 요청수(점선:한주전)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:trace.servlet.request.hits{$service}.as_count().rollup(sum, 60)","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic"},"display_type":"line"},{"formulas":[{"formula":"week_before(query0)"}],"response_format":"timeseries","queries":[{"query":"sum:trace.servlet.request.hits{$service}.as_count().rollup(sum, 60)","data_source":"metrics","name":"query0"}],"style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":0,"width":4,"height":4}},{"id":1144959642374862,"definition":{"title":"평균 Latency(점선:P95) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:trace.servlet.request{$service}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple"},"display_type":"line"},{"formulas":[{"formula":"query0"}],"response_format":"timeseries","queries":[{"query":"p95:trace.servlet.request{$service}","data_source":"metrics","name":"query0"}],"style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":4}},{"id":4681120107124106,"definition":{"title":"전체 Response_Code","title_size":"16","title_align":"left","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"avg:trace.servlet.request.hits.by_http_status{$service} by {http.status_code}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"type":"sunburst","legend":{"type":"table"}},"layout":{"x":0,"y":4,"width":4,"height":3}},{"id":2350535487964012,"definition":{"title":"에러 혹은 지연요청(3초이상) 발생 분포도","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"search":{"query":"service:web-store (@duration:>1000000000 OR status:error) $service"},"data_source":"spans","compute":{"aggregation":"count"},"name":"query1","indexes":["trace-search"],"group_by":[{"facet":"status","sort":{"aggregation":"count","order":"desc"},"limit":10}]}],"style":{"palette":"red","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":4,"y":4,"width":3,"height":3}},{"id":5513796356344276,"definition":{"title":"3초 이상 지연 API","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"지연 Count","conditional_formats":[{"palette":"white_on_red","comparator":">","value":10}],"limit":{"count":25,"order":"desc"},"formula":"query1"}],"response_format":"scalar","queries":[{"search":{"query":"service:web-store @duration:>3000000000 $service"},"data_source":"spans","compute":{"aggregation":"count"},"name":"query1","indexes":["trace-search"],"group_by":[{"facet":"@http.path_group","sort":{"aggregation":"count","order":"desc"},"limit":25}]}]}],"has_search_bar":"always"},"layout":{"x":7,"y":4,"width":3,"height":3}},{"id":4499209046953090,"definition":{"title":"에러발생 TOP API","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"에러 Count","conditional_formats":[{"palette":"white_on_red","comparator":">","value":10}],"limit":{"count":10,"order":"desc"},"formula":"query1"}],"response_format":"scalar","queries":[{"search":{"query":"status:error service:web-store $service"},"data_source":"spans","compute":{"aggregation":"count"},"name":"query1","indexes":["trace-search"],"group_by":[{"facet":"resource_name","sort":{"aggregation":"count","order":"desc"},"limit":10}]}]}],"has_search_bar":"always"},"layout":{"x":10,"y":4,"width":2,"height":3}},{"id":3690223722748192,"definition":{"title":"API별 요청","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:trace.servlet.request.hits{$service} by {resource_name}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":7,"width":12,"height":3}},{"id":4540268662952510,"definition":{"title":"API별 Latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"p90:trace.servlet.request{$service} by {resource_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":10,"width":12,"height":3}}]},"layout":{"x":0,"y":0,"width":12,"height":14}},{"id":2004645723821354,"definition":{"title":"DB 쿼리 관련","type":"group","background_color":"vivid_purple","show_title":true,"layout_type":"ordered","widgets":[{"id":6008846464798778,"definition":{"title":"TPS(점선:한주전) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:trace.mongo.cmd.hits{$service}.as_rate()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic"},"display_type":"line"},{"formulas":[{"formula":"week_before(query0)"}],"response_format":"timeseries","queries":[{"query":"sum:trace.mongo.cmd.hits{$service}.as_rate()","data_source":"metrics","name":"query0"}],"style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":4,"height":4}},{"id":3177165222828140,"definition":{"title":"분당 쿼리수(점선:한주전)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:trace.mongo.cmd.hits{$service}.as_count().rollup(sum, 60)","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic"},"display_type":"line"},{"formulas":[{"formula":"week_before(query0)"}],"response_format":"timeseries","queries":[{"query":"sum:trace.mongo.cmd.hits{$service}.as_count().rollup(sum, 60)","data_source":"metrics","name":"query0"}],"style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":0,"width":4,"height":4}},{"id":6811414610364410,"definition":{"title":"평균 Latency(점선:P95) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:trace.mongo.cmd{$service}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple"},"display_type":"line"},{"formulas":[{"formula":"query0"}],"response_format":"timeseries","queries":[{"query":"p95:trace.mongo.cmd{$service}","data_source":"metrics","name":"query0"}],"style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":4}},{"id":3236213566238422,"definition":{"title":"Query분포도","title_size":"16","title_align":"left","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"avg:trace.mongo.cmd.hits{$service} by {resource_name}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"type":"sunburst","legend":{"type":"table"}},"layout":{"x":0,"y":4,"width":12,"height":3}},{"id":6460561041653758,"definition":{"title":"Query","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:trace.mongo.cmd.hits{$service} by {resource_name}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":7,"width":12,"height":3}},{"id":2304011374376386,"definition":{"title":"Latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"p90:trace.mongo.cmd{$service} by {resource_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":10,"width":12,"height":3}},{"id":7652842327856302,"definition":{"title":"Error","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"avg:trace.mongo.cmd.errors{$service} by {resource_name}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"warm"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":13,"width":12,"height":3}}]},"layout":{"x":0,"y":14,"width":12,"height":17,"is_column_break":true}}],"template_variables":[{"name":"service","default":"*","prefix":"service","available_values":[]}],"layout_type":"ordered","is_read_only":false,"notify_list":[],"reflow_type":"fixed","id":"n65-45e-qee"}