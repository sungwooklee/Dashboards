{"title":"샘플 - Performance Dashboard 모니터링","description":"\n\n","widgets":[{"id":2062282333221066,"definition":{"title":"전체 요청 관련","background_color":"vivid_orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3147505544697090,"definition":{"title":"TPS(점선:한주전) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"sum:trace.servlet.request.hits{$service,$env} by {service}.as_rate()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"line"},{"formulas":[{"formula":"default_zero(week_before(query0))"}],"queries":[{"query":"sum:trace.servlet.request.hits{$service,$env} by {service}.as_rate()","data_source":"metrics","name":"query0"}],"response_format":"timeseries","style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":4,"height":4}},{"id":5835034640328388,"definition":{"title":"분당 API 요청수(점선:한주전)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"sum:trace.servlet.request.hits{$service,$env} by {service}.as_count().rollup(sum, 60)","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"line"},{"formulas":[{"formula":"default_zero(week_before(query0))"}],"queries":[{"query":"sum:trace.servlet.request.hits{$service,$env} by {service}.as_count().rollup(sum, 60)","data_source":"metrics","name":"query0"}],"response_format":"timeseries","style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":0,"width":4,"height":4}},{"id":1144959642374862,"definition":{"title":"평균 Latency(점선:P95) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"avg:trace.servlet.request{$service,$env} by {service}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"purple"},"display_type":"line"},{"formulas":[{"formula":"default_zero(query0)"}],"queries":[{"query":"p95:trace.servlet.request{$service,$env} by {service}","data_source":"metrics","name":"query0"}],"response_format":"timeseries","style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":4}},{"id":4681120107124106,"definition":{"title":"전체 Response_Code","title_size":"16","title_align":"left","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"avg:trace.servlet.request.hits.by_http_status{$service,$env} by {http.status_code}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"type":"sunburst","legend":{"type":"inline"}},"layout":{"x":0,"y":4,"width":4,"height":3}},{"id":2350535487964012,"definition":{"title":"에러 혹은 지연요청(1초이상) 발생 분포도","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"지연 API","formula":"query1"},{"alias":"에러 API","formula":"query2"}],"queries":[{"data_source":"spans","name":"query1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":100,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"@duration:>1000000000 $service $env operation_name:servlet.request"}},{"data_source":"spans","name":"query2","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":100,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"status:error $service $env operation_name:servlet.request"}}],"response_format":"timeseries","style":{"palette":"semantic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":4,"y":4,"width":3,"height":3}},{"id":5513796356344276,"definition":{"title":"1초 이상 지연 API","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"지연 Count","conditional_formats":[{"type":"range","palette":"transparent_to_orange"}],"cell_display_mode":"number","formula":"query1","limit":{"count":1000,"order":"desc"}}],"response_format":"scalar","queries":[{"data_source":"spans","name":"query1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@http.path_group","limit":1000,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"@duration:>1000000000 $service $env operation_name:servlet.request"}}]}],"has_search_bar":"always"},"layout":{"x":7,"y":4,"width":3,"height":3}},{"id":4499209046953090,"definition":{"title":"에러발생 TOP API","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"에러 Count","conditional_formats":[{"type":"range","palette":"vivid_transparent_to_red"}],"cell_display_mode":"number","formula":"query1","limit":{"count":1000,"order":"desc"}}],"response_format":"scalar","queries":[{"data_source":"spans","name":"query1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":1000,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"status:error $service $env operation_name:servlet.request"}}]}],"has_search_bar":"always"},"layout":{"x":10,"y":4,"width":2,"height":3}},{"id":3690223722748192,"definition":{"title":"API별 요청","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"avg:trace.servlet.request.hits{$service,$env} by {resource_name}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":7,"width":12,"height":3}},{"id":4540268662952510,"definition":{"title":"API별 Latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"response_format":"timeseries","queries":[{"query":"p90:trace.servlet.request{$service,$env} by {resource_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":10,"width":12,"height":3}},{"id":2334117423449980,"definition":{"title":"API 에러 (5xx)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"style":{"palette":"red"},"formula":"duplicatedquery1"}],"queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@http.status_code","limit":5,"sort":{"order":"desc","aggregation":"count"}},{"facet":"resource_name","limit":5,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"status:error @http.status_code:5* $env $service operation_name:servlet.request"}}],"response_format":"timeseries","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":false},"markers":[]},"layout":{"x":0,"y":13,"width":6,"height":3}},{"id":3981852862746480,"definition":{"title":"API 에러 리스트 (5xx)","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Count","conditional_formats":[{"type":"range","palette":"vivid_transparent_to_red"}],"cell_display_mode":"number","formula":"duplicatedquery1","limit":{"count":100,"order":"desc"}}],"response_format":"scalar","queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@http.status_code","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"resource_name","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"status:error @http.status_code:5* operation_name:servlet.request $service $env"}}]}]},"layout":{"x":6,"y":13,"width":6,"height":3}},{"id":7061437318161712,"definition":{"title":"API 1초 이상 지연","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"duplicatedquery1"}],"queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":5,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@http.status_code","limit":5,"sort":{"order":"desc","aggregation":"count"}},{"facet":"status","limit":5,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"@duration:>1000000000 $service $env operation_name:servlet.request"}}],"response_format":"timeseries","style":{"palette":"semantic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":false},"markers":[]},"layout":{"x":0,"y":16,"width":6,"height":3}},{"id":8985332800188890,"definition":{"title":"API 1초 이상 지연 리스트","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Count","conditional_formats":[{"type":"range","palette":"vivid_transparent_to_orange"}],"cell_display_mode":"number","formula":"duplicatedquery1","limit":{"order":"desc"}}],"response_format":"scalar","queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@http.status_code","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"resource_name","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"@duration:>1000000000 $service $env operation_name:servlet.request"}}]}]},"layout":{"x":6,"y":16,"width":6,"height":3}},{"id":2681837155166486,"definition":{"title":"전주 대비 요청량 트랜드","title_size":"16","title_align":"left","type":"change","requests":[{"formulas":[{"formula":"week_before(query1)"},{"formula":"query1"}],"order_by":"change","order_dir":"asc","response_format":"scalar","show_present":true,"increase_good":true,"queries":[{"query":"sum:trace.servlet.request.hits{$service,$env} by {resource_name}.as_count()","data_source":"metrics","name":"query1","aggregator":"avg"}],"change_type":"absolute"}]},"layout":{"x":0,"y":19,"width":6,"height":3}},{"id":4673868470133738,"definition":{"title":"전주 대비  Latency 트랜드","title_size":"16","title_align":"left","type":"change","requests":[{"formulas":[{"formula":"week_before(query1)"},{"formula":"query1"}],"order_by":"change","order_dir":"desc","response_format":"scalar","show_present":true,"increase_good":false,"queries":[{"query":"p90:trace.servlet.request{$service,$env} by {resource_name}","data_source":"metrics","name":"query1","aggregator":"avg"}],"change_type":"absolute"}]},"layout":{"x":6,"y":19,"width":6,"height":3}}]},"layout":{"x":0,"y":0,"width":12,"height":23}},{"id":2004645723821354,"definition":{"title":"DB 쿼리 관련","background_color":"vivid_purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6008846464798778,"definition":{"title":"TPS(점선:한주전) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"sum:trace.mongo.query.hits{$env} by {service}.as_rate()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"line"},{"formulas":[{"formula":"default_zero(week_before(query0))"}],"queries":[{"query":"sum:trace.mongo.query.hits{$env} by {service}.as_rate()","data_source":"metrics","name":"query0"}],"response_format":"timeseries","style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":4,"height":4}},{"id":3177165222828140,"definition":{"title":"분당 쿼리수(점선:한주전)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"sum:trace.mongo.query.hits{$env} by {service}.as_count().rollup(sum, 60)","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"line"},{"formulas":[{"formula":"default_zero(week_before(query0))"}],"queries":[{"query":"sum:trace.mongo.query.hits{$env} by {service}.as_count().rollup(sum, 60)","data_source":"metrics","name":"query0"}],"response_format":"timeseries","style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":0,"width":4,"height":4}},{"id":6811414610364410,"definition":{"title":"평균 Latency(점선:P95) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"avg:trace.mongo.query{$env} by {service}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"purple"},"display_type":"line"},{"formulas":[{"formula":"default_zero(query0)"}],"queries":[{"query":"p95:trace.mongo.query{$env} by {service}","data_source":"metrics","name":"query0"}],"response_format":"timeseries","style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":4}},{"id":3236213566238422,"definition":{"title":"Query분포도(createindexes 제외)","title_size":"16","title_align":"left","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:trace.mongo.query.hits{$env,!resource_name:_createindexes*} by {resource_name,service}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"type":"sunburst","legend":{"type":"table"}},"layout":{"x":0,"y":4,"width":12,"height":3}},{"id":6460561041653758,"definition":{"title":"Query(createindexes 제외)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"sum:trace.mongo.query.hits{$env,!resource_name:_createindexes*} by {service,resource_name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":7,"width":12,"height":3}},{"id":2304011374376386,"definition":{"title":"Latency(createindexes 제외)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"p90:trace.mongo.query{$env,!resource_name:_createindexes*} by {service,resource_name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":10,"width":12,"height":3}},{"id":7652842327856302,"definition":{"title":"Error","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"spans","name":"query1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"status:error type:mongodb $env"}}],"response_format":"timeseries","style":{"palette":"warm"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":13,"width":12,"height":3}},{"id":2816224902899496,"definition":{"title":"DB Query 에러","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"duplicatedquery1"}],"queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"service","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"status:error type:mongodb"}}],"response_format":"timeseries","style":{"palette":"red","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":false},"markers":[]},"layout":{"x":0,"y":16,"width":6,"height":3}},{"id":1069955046089812,"definition":{"title":"DB Query 에러 리스트","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Count","conditional_formats":[{"type":"range","palette":"vivid_transparent_to_red"}],"cell_display_mode":"number","formula":"duplicatedquery1","limit":{"count":900,"order":"desc"}}],"response_format":"scalar","queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":30,"sort":{"order":"desc","aggregation":"count"}},{"facet":"service","limit":30,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"status:error type:mongodb"}}]}]},"layout":{"x":6,"y":16,"width":6,"height":3}},{"id":7049104900138178,"definition":{"title":"DB Query 1초 이상 지연","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"duplicatedquery1"}],"queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"service","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"@duration:>1000000000 type:mongodb"}}],"response_format":"timeseries","style":{"palette":"semantic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":false},"markers":[]},"layout":{"x":0,"y":19,"width":6,"height":3}},{"id":7129416050428962,"definition":{"title":"DB Query 1초 이상 지연 리스트","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Count","conditional_formats":[{"type":"range","palette":"vivid_transparent_to_orange"}],"cell_display_mode":"number","formula":"duplicatedquery1","limit":{"count":900,"order":"desc"}}],"response_format":"scalar","queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":30,"sort":{"order":"desc","aggregation":"count"}},{"facet":"service","limit":30,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"@duration:>1000000000 type:mongodb"}}]}]},"layout":{"x":6,"y":19,"width":6,"height":3}},{"id":7618790789223922,"definition":{"title":"전주 대비 요청량 변화트랜드","title_size":"16","title_align":"left","type":"change","requests":[{"formulas":[{"formula":"week_before(query1)"},{"formula":"query1"}],"order_by":"change","order_dir":"asc","response_format":"scalar","show_present":true,"increase_good":true,"queries":[{"query":"sum:trace.mongo.query.hits{$env} by {service,resource_name}.as_count()","data_source":"metrics","name":"query1","aggregator":"avg"}],"change_type":"absolute"}]},"layout":{"x":0,"y":22,"width":6,"height":3}},{"id":8200751479209174,"definition":{"title":"전주 대비 Latency 변화트랜드","title_size":"16","title_align":"left","type":"change","requests":[{"formulas":[{"formula":"week_before(query1)"},{"formula":"query1"}],"order_by":"change","order_dir":"desc","response_format":"scalar","show_present":true,"increase_good":false,"queries":[{"query":"p90:trace.mongo.query{$env} by {service,resource_name}","data_source":"metrics","name":"query1","aggregator":"avg"}],"change_type":"absolute"}]},"layout":{"x":6,"y":22,"width":6,"height":3}}]},"layout":{"x":0,"y":23,"width":12,"height":26,"is_column_break":true}},{"id":4610953598496048,"definition":{"title":"REDIS 관련","background_color":"vivid_pink","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":5601419843027992,"definition":{"title":"TPS(점선:한주전) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"sum:trace.redis.query.hits{$env} by {service}.as_rate()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"line"},{"formulas":[{"formula":"default_zero(week_before(query0))"}],"queries":[{"query":"sum:trace.redis.query.hits{$env} by {service}.as_rate()","data_source":"metrics","name":"query0"}],"response_format":"timeseries","style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":4,"height":4}},{"id":3856357122442622,"definition":{"title":"분당 쿼리수(점선:한주전)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"sum:trace.redis.query.hits{$env} by {service}.as_count().rollup(sum, 60)","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"line"},{"formulas":[{"formula":"default_zero(week_before(query0))"}],"queries":[{"query":"sum:trace.redis.query.hits{$env} by {service}.as_count().rollup(sum, 60)","data_source":"metrics","name":"query0"}],"response_format":"timeseries","style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":0,"width":4,"height":4}},{"id":1695498212100564,"definition":{"title":"평균 Latency(점선:P95) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"avg:trace.redis.query{$env} by {service}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"purple"},"display_type":"line"},{"formulas":[{"formula":"default_zero(query0)"}],"queries":[{"query":"sum:trace.redis.query{$env} by {service}.as_count()","data_source":"metrics","name":"query0"}],"response_format":"timeseries","style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":4}},{"id":7208101415339430,"definition":{"title":"Query분포도","title_size":"16","title_align":"left","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:trace.redis.query.hits{$env} by {resource_name,service}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"type":"sunburst","legend":{"type":"table"}},"layout":{"x":0,"y":4,"width":12,"height":3}},{"id":3097155295956202,"definition":{"title":"Query","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"sum:trace.redis.query.hits{$env} by {resource_name,service}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":7,"width":12,"height":3}},{"id":2310882279140974,"definition":{"title":"Latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"p90:trace.redis.query{$env} by {resource_name,service}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":10,"width":12,"height":3}},{"id":6763005667123172,"definition":{"title":"Error","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"sum:trace.redis.query.errors{$env} by {resource_name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"warm"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":13,"width":12,"height":3}},{"id":400172348691836,"definition":{"title":"DB Query 에러","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"duplicatedquery1"}],"queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"service","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"status:error $env operation_name:redis.query"}}],"response_format":"timeseries","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":false},"markers":[]},"layout":{"x":0,"y":16,"width":6,"height":3}},{"id":2459957075150466,"definition":{"title":"DB Query 에러 리스트","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Count","conditional_formats":[{"type":"range","palette":"vivid_transparent_to_red"}],"cell_display_mode":"number","formula":"duplicatedquery1","limit":{"count":900,"order":"desc"}}],"response_format":"scalar","queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":30,"sort":{"order":"desc","aggregation":"count"}},{"facet":"service","limit":30,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"status:error $env operation_name:redis.query"}}]}]},"layout":{"x":6,"y":16,"width":6,"height":3}},{"id":7272067364197264,"definition":{"title":"DB Query 1초 이상 지연","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"duplicatedquery1"}],"queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"service","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"@duration:>1000000000 $env operation_name:redis.query"}}],"response_format":"timeseries","style":{"palette":"semantic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":false},"markers":[]},"layout":{"x":0,"y":19,"width":6,"height":3}},{"id":8506964927805406,"definition":{"title":"DB Query 1초 이상 지연 리스트","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Count","conditional_formats":[{"type":"range","palette":"vivid_transparent_to_orange"}],"cell_display_mode":"number","formula":"duplicatedquery1","limit":{"count":900,"order":"desc"}}],"response_format":"scalar","queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":30,"sort":{"order":"desc","aggregation":"count"}},{"facet":"service","limit":30,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"@duration:>1000000000 $env operation_name:redis.query"}}]}]},"layout":{"x":6,"y":19,"width":6,"height":3}},{"id":7146110420218212,"definition":{"title":"전주 대비 요청량 변화트랜드","title_size":"16","title_align":"left","type":"change","requests":[{"formulas":[{"formula":"week_before(query1)"},{"formula":"query1"}],"order_by":"change","order_dir":"asc","response_format":"scalar","show_present":true,"increase_good":true,"queries":[{"query":"sum:trace.redis.query.hits{$env} by {resource_name}.as_count()","data_source":"metrics","name":"query1","aggregator":"avg"}],"change_type":"absolute"}]},"layout":{"x":0,"y":22,"width":6,"height":3}},{"id":1069835705296002,"definition":{"title":"전주 대비 Latency 변화트랜드","title_size":"16","title_align":"left","type":"change","requests":[{"formulas":[{"formula":"week_before(query1)"},{"formula":"query1"}],"order_by":"change","order_dir":"desc","response_format":"scalar","show_present":true,"increase_good":false,"queries":[{"query":"p90:trace.redis.query{$env} by {resource_name}","data_source":"metrics","name":"query1","aggregator":"avg"}],"change_type":"absolute"}]},"layout":{"x":6,"y":22,"width":6,"height":3}}]},"layout":{"x":0,"y":49,"width":12,"height":26}},{"id":5765219960724992,"definition":{"title":"AWS SDK 관련","background_color":"vivid_yellow","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":8086871279331264,"definition":{"title":"TPS(점선:한주전) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"sum:trace.aws.http.hits{$env} by {service}.as_rate()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"line"},{"formulas":[{"formula":"default_zero(week_before(query0))"}],"queries":[{"query":"sum:trace.aws.http.hits{$env} by {service}.as_rate()","data_source":"metrics","name":"query0"}],"response_format":"timeseries","style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":4,"height":4}},{"id":4714313692246258,"definition":{"title":"분당 쿼리수(점선:한주전)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"sum:trace.aws.http.hits{$env} by {service}.as_count().rollup(sum, 60)","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"line"},{"formulas":[{"formula":"default_zero(week_before(query0))"}],"queries":[{"query":"sum:trace.aws.http.hits{$env} by {service}.as_count().rollup(sum, 60)","data_source":"metrics","name":"query0"}],"response_format":"timeseries","style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":0,"width":4,"height":4}},{"id":7059599796731354,"definition":{"title":"평균 Latency(점선:P95) ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"sum:trace.aws.http{$env} by {service}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"purple"},"display_type":"line"},{"formulas":[{"formula":"default_zero(query0)"}],"queries":[{"query":"sum:trace.aws.http{$env} by {service}.as_count()","data_source":"metrics","name":"query0"}],"response_format":"timeseries","style":{"palette":"grey","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":4}},{"id":6229845752288108,"definition":{"title":"AWS SDK 요청 분포도","title_size":"16","title_align":"left","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:trace.aws.http.hits{$env} by {resource_name,service}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"type":"sunburst","legend":{"type":"table"}},"layout":{"x":0,"y":4,"width":12,"height":3}},{"id":5958716096220158,"definition":{"title":"Query","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"sum:trace.aws.http.hits{$env} by {resource_name,service}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":7,"width":12,"height":3}},{"id":890377863251732,"definition":{"title":"Latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"p90:trace.aws.http{$env} by {resource_name,service}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":10,"width":12,"height":3}},{"id":8722776084968648,"definition":{"title":"Error","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"default_zero(query1)"}],"queries":[{"query":"sum:trace.aws.http.errors{$env} by {resource_name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"warm"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":13,"width":12,"height":3}},{"id":1363157960800668,"definition":{"title":"Query 에러","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"duplicatedquery1"}],"queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"service","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"status:error $env operation_name:aws.http"}}],"response_format":"timeseries","style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":false},"markers":[]},"layout":{"x":0,"y":16,"width":6,"height":3}},{"id":3152120021812394,"definition":{"title":"Query 에러 리스트","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Count","conditional_formats":[{"type":"range","palette":"vivid_transparent_to_red"}],"cell_display_mode":"number","formula":"duplicatedquery1","limit":{"count":900,"order":"desc"}}],"response_format":"scalar","queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":30,"sort":{"order":"desc","aggregation":"count"}},{"facet":"service","limit":30,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"status:error $env operation_name:aws.http"}}]}]},"layout":{"x":6,"y":16,"width":6,"height":3}},{"id":8659398747318404,"definition":{"title":"Query 1초 이상 지연","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"duplicatedquery1"}],"queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"service","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"@duration:>1000000000 $env operation_name:aws.http"}}],"response_format":"timeseries","style":{"palette":"semantic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":false},"markers":[]},"layout":{"x":0,"y":19,"width":6,"height":3}},{"id":7057687188027596,"definition":{"title":"Query 1초 이상 지연 리스트","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Count","conditional_formats":[{"type":"range","palette":"vivid_transparent_to_orange"}],"cell_display_mode":"number","formula":"duplicatedquery1","limit":{"count":900,"order":"desc"}}],"response_format":"scalar","queries":[{"data_source":"spans","name":"duplicatedquery1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":30,"sort":{"order":"desc","aggregation":"count"}},{"facet":"service","limit":30,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"@duration:>1000000000 $env operation_name:aws.http"}}]}]},"layout":{"x":6,"y":19,"width":6,"height":3}},{"id":4317144645783944,"definition":{"title":"전주 대비 요청량 변화트랜드","title_size":"16","title_align":"left","type":"change","requests":[{"formulas":[{"formula":"week_before(query1)"},{"formula":"query1"}],"order_by":"change","order_dir":"asc","response_format":"scalar","show_present":true,"increase_good":true,"queries":[{"query":"sum:trace.aws.http.hits{$env} by {resource_name}.as_count()","data_source":"metrics","name":"query1","aggregator":"avg"}],"change_type":"absolute"}]},"layout":{"x":0,"y":22,"width":6,"height":3}},{"id":519342869034764,"definition":{"title":"전주 대비 Latency 변화트랜드","title_size":"16","title_align":"left","type":"change","requests":[{"formulas":[{"formula":"week_before(query1)"},{"formula":"query1"}],"order_by":"change","order_dir":"desc","response_format":"scalar","show_present":true,"increase_good":false,"queries":[{"query":"p90:trace.aws.http{$env} by {resource_name}","data_source":"metrics","name":"query1","aggregator":"avg"}],"change_type":"absolute"}]},"layout":{"x":6,"y":22,"width":6,"height":3}}]},"layout":{"x":0,"y":75,"width":12,"height":26}}],"template_variables":[{"name":"service","prefix":"service","available_values":["kmx-auth","kmx-escrow"],"defaults":["kmx-auth","kmx-escrow"]},{"name":"env","prefix":"env","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed","tags":["team:knoxmatrix-server-team"]}