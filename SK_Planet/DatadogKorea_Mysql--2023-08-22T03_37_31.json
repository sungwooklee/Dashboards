{"title":"Datadog Korea: Mysql","description":"datadog_demo_keep:true","widgets":[{"id":8270545792798376,"definition":{"title":"DB Overview(MySQL Metrics)","background_color":"vivid_blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":4828654850940402,"definition":{"title":"CPU","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:aws.rds.cpuutilization{*} by {host}"}},"node_type":"host","no_metric_hosts":false,"no_group_hosts":false,"group":["dbname"],"scope":[],"style":{"palette":"green_to_orange","palette_flip":false,"fill_max":"80"}},"layout":{"x":0,"y":0,"width":3,"height":3}},{"id":2468088077275196,"definition":{"title":"Memory","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:aws.rds.freeable_memory{*} by {host}"}},"node_type":"host","no_metric_hosts":false,"no_group_hosts":false,"group":["dbname"],"scope":[],"style":{"palette":"green_to_orange","palette_flip":true}},"layout":{"x":3,"y":0,"width":3,"height":3}},{"id":4719870591446016,"definition":{"title":"Write IOPS","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:aws.rds.write_iops{*} by {host}"}},"node_type":"host","no_metric_hosts":false,"no_group_hosts":false,"group":["dbname"],"scope":[],"style":{"palette":"green_to_orange","palette_flip":false}},"layout":{"x":6,"y":0,"width":3,"height":3}},{"id":8013755510826386,"definition":{"title":"Read IOPS","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:aws.rds.read_iops{*} by {host}"}},"node_type":"host","no_metric_hosts":false,"no_group_hosts":false,"group":["dbname"],"scope":[],"style":{"palette":"green_to_orange","palette_flip":false}},"layout":{"x":9,"y":0,"width":3,"height":3}},{"id":3372514560325780,"definition":{"title":"허용 커넥션 비율","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"cell_display_mode":"bar","alias":"허용 커넥션 비율","formula":"query2 / query1 * 100","limit":{"count":500,"order":"desc"}}],"queries":[{"data_source":"metrics","name":"query2","query":"avg:mysql.performance.threads_connected{*} by {host}","aggregator":"avg"},{"data_source":"metrics","name":"query1","query":"avg:mysql.net.max_connections_available{*} by {host}","aggregator":"avg"}]}]},"layout":{"x":0,"y":3,"width":5,"height":3}},{"id":5240635310615540,"definition":{"title":"허용 커넥션 비율","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1w"},"type":"timeseries","requests":[{"formulas":[{"formula":"query2 / query1 * 100"}],"queries":[{"data_source":"metrics","name":"query2","query":"avg:mysql.performance.threads_connected{*} by {host}"},{"data_source":"metrics","name":"query1","query":"avg:mysql.net.max_connections_available{*} by {host}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":"y = 100","value":"y = 100","display_type":"error dashed"}]},"layout":{"x":5,"y":3,"width":7,"height":3}},{"id":3339743915990188,"definition":{"title":"초당 커넥션","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:mysql.net.connections{*} by {host}","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":50,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":6,"width":5,"height":3}},{"id":8789502211545708,"definition":{"title":"커넥션 수","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"현재 커넥션","formula":"query2"}],"queries":[{"data_source":"metrics","name":"query2","query":"sum:mysql.net.connections{*} by {host}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":5,"y":6,"width":7,"height":3}},{"id":8090674655643586,"definition":{"title":"Row/Dead/Table Locks","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"Row Lock","formula":"query1","limit":{"count":500,"order":"desc"}},{"alias":"Row Lock","formula":"query2"},{"alias":"Table Lock","formula":"query3"}],"queries":[{"query":"avg:mysql.innodb.row_lock_waits{$engine} by {host}","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"sum:aws.rds.deadlocks{$engine} by {host}.as_count()","data_source":"metrics","name":"query2","aggregator":"avg"},{"query":"avg:mysql.performance.table_locks_waited.rate{$engine} by {host}","data_source":"metrics","name":"query3","aggregator":"avg"}]}]},"layout":{"x":0,"y":9,"width":5,"height":3}},{"id":7059268779888610,"definition":{"title":"Row/Dead/Table Locks","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Row Lock","formula":"query1"}],"queries":[{"query":"avg:mysql.innodb.row_lock_waits{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"on_right_yaxis":false,"formulas":[{"alias":"Dead Lock","formula":"query1"}],"queries":[{"query":"avg:aws.rds.deadlocks{$engine} by {host}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"on_right_yaxis":false,"formulas":[{"alias":"Table Lock","formula":"query1"}],"queries":[{"query":"avg:mysql.performance.table_locks_waited.rate{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":5,"y":9,"width":7,"height":3}},{"id":7482519744832532,"definition":{"title":"Query Runtime - Avg","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"avg:mysql.performance.query_run_time.avg{$engine}","data_source":"metrics","name":"query1","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}]}]},"layout":{"x":0,"y":12,"width":5,"height":3}},{"id":8780103731024880,"definition":{"title":"Query Runtime - Avg","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:mysql.performance.query_run_time.avg{$engine}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":5,"y":12,"width":7,"height":3}},{"id":3577559981004560,"definition":{"title":"초당 쿼리수","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:mysql.performance.questions{$engine} by {host}","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":15,"width":5,"height":3}},{"id":8981441890633532,"definition":{"title":"초당 쿼리수","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:mysql.performance.questions{*,*,$engine} by {host}"}],"response_format":"timeseries","style":{"palette":"orange"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":5,"y":15,"width":7,"height":3}},{"id":4043541196724062,"definition":{"title":"쓰레드 수","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query3","query":"sum:mysql.performance.threads_connected{$engine} by {host}","aggregator":"avg"}],"formulas":[{"formula":"query3","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":18,"width":5,"height":3}},{"id":3270080486699048,"definition":{"title":"쓰레드 수","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"쓰레드 수","formula":"query3"}],"queries":[{"data_source":"metrics","name":"query3","query":"sum:mysql.performance.threads_connected{$engine} by {host}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":5,"y":18,"width":7,"height":3}},{"id":6185522065938054,"definition":{"title":"초당 읽기 쿼리수","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:mysql.performance.com_select{$engine} by {host}","aggregator":"avg"},{"data_source":"metrics","name":"query2","query":"avg:mysql.performance.qcache_hits{$engine}","aggregator":"avg"}],"formulas":[{"formula":"query1 + query2","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":21,"width":5,"height":3}},{"id":8556748284961600,"definition":{"title":"초당 읽기 쿼리수","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"},{"formula":"query2"},{"formula":"query1 + query2"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:mysql.performance.com_select{*,*,$engine} by {host}"},{"data_source":"metrics","name":"query2","query":"avg:mysql.performance.qcache_hits{*,*,$engine} by {host}"}],"response_format":"timeseries","style":{"palette":"green"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":5,"y":21,"width":7,"height":3}},{"id":8038348205910242,"definition":{"title":"쓰기 쿼리수","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:mysql.performance.com_insert{$engine} by {host}","aggregator":"avg"},{"data_source":"metrics","name":"query2","query":"avg:mysql.performance.com_update{$engine} by {host}","aggregator":"avg"},{"data_source":"metrics","name":"query3","query":"avg:mysql.performance.com_delete{$engine} by {host}","aggregator":"avg"}],"formulas":[{"formula":"query1 + query2 + query3","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":24,"width":5,"height":3}},{"id":3061070820116492,"definition":{"title":"쓰기 쿼리수","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1 + query2 + query3"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:mysql.performance.com_insert{$engine} by {host}"},{"data_source":"metrics","name":"query2","query":"avg:mysql.performance.com_update{$engine} by {host}"},{"data_source":"metrics","name":"query3","query":"avg:mysql.performance.com_delete{$engine} by {host}"}],"response_format":"timeseries","style":{"palette":"purple"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":5,"y":24,"width":7,"height":3}},{"id":280521451324388,"definition":{"title":"지난주 대비 쿼리수 비교","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Current","formula":"query1"}],"queries":[{"query":"avg:mysql.performance.questions{$engine}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"alias":"Week Before","formula":"week_before(query1)"}],"queries":[{"query":"avg:mysql.performance.questions{$engine}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"dashed","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":27,"width":12,"height":3}},{"id":6174789830911056,"definition":{"title":"CRUD","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"anomalies(query1, \"basic\", 2)","alias":"Select"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"avg:mysql.performance.com_select{$engine}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"formula":"anomalies(query1, \"basic\", 2)","alias":"Insert"}],"response_format":"timeseries","on_right_yaxis":true,"queries":[{"query":"avg:mysql.performance.com_insert{$engine}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"formula":"anomalies(query1, \"basic\", 2)","alias":"Update"}],"response_format":"timeseries","on_right_yaxis":true,"queries":[{"query":"avg:mysql.performance.com_update{$engine}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"formula":"anomalies(query1, \"basic\", 2)","alias":"Delete"}],"response_format":"timeseries","on_right_yaxis":true,"queries":[{"query":"avg:mysql.performance.com_delete{$engine}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"right_yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":30,"width":6,"height":3}},{"id":6716000952521168,"definition":{"title":"JOIN","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"FullJoin","formula":"query1"}],"queries":[{"query":"avg:mysql.performance.select_full_join{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"on_right_yaxis":true,"formulas":[{"alias":"FullRangeJoin","formula":"query1"}],"queries":[{"query":"avg:mysql.performance.select_full_range_join{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"right_yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":30,"width":6,"height":3}},{"id":4841880943802032,"definition":{"title":"작업 중인 쓰레드","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:mysql.performance.threads_running{*,*,*,$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"grey"},"display_type":"line"}],"custom_links":[]},"layout":{"x":0,"y":33,"width":6,"height":2}},{"id":5178973524537142,"definition":{"title":"쓰레드 캐시 사이즈","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:mysql.performance.thread_cache_size{*,*,*,$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"grey"},"display_type":"line"}],"custom_links":[]},"layout":{"x":6,"y":33,"width":6,"height":2}},{"id":753572749114024,"definition":{"title":"쿼리 실행속도","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"query_table","requests":[{"formulas":[{"alias":"쿼리수","conditional_formats":[],"cell_display_mode":"bar","formula":"query1","limit":{"count":500,"order":"desc"}},{"alias":"평균 소요시간(하루 전)","formula":"day_before(query2)"},{"alias":"평균 소요시간","formula":"query3"},{"alias":"전일대비","conditional_formats":[{"comparator":">","palette":"white_on_red","value":0},{"comparator":"<","palette":"white_on_green","value":0}],"formula":"day_before(query2) - query3"}],"response_format":"scalar","queries":[{"query":"avg:mysql.queries.count{NOT query:__per* AND NOT query:\"SELECT \\* FROM dbm*\" AND $engine} by {query,dbinstanceidentifier,dbname}.as_rate()","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"avg:mysql.queries.time{NOT query:__per* AND NOT query:\"SELECT \\* FROM dbm*\" AND $engine} by {query,dbinstanceidentifier,dbname}.as_count()","data_source":"metrics","name":"query2","aggregator":"avg"},{"query":"avg:mysql.queries.time{NOT query:__per* AND NOT query:\"SELECT \\* FROM dbm*\" AND $engine} by {query,dbinstanceidentifier,dbname}.as_count()","data_source":"metrics","name":"query3","aggregator":"avg"}]}],"has_search_bar":"auto","custom_links":[{"label":"Query Metrics","link":"https://app.datadoghq.com/databases/queries?query=-schema:__performance_schema_digest_lost__ -table:(dbm_order OR dbm_user OR performance_schema)&dbType=MySQL&start={{timestamp_start}}&end={{timestamp_end}}&paused=true"},{"label":"Query Metric","link":"https://app.datadoghq.com/databases/queries?query=-schema:__performance_schema_digest_lost__ -table:(dbm_order OR dbm_user OR performance_schema) {{query}}&dbType=MySQL&start={{timestamp_start}}&end={{timestamp_end}}&paused=true"}]},"layout":{"x":0,"y":35,"width":12,"height":4}},{"id":2236455662164882,"definition":{"title":"쿼리 에러 개수","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"에러(하루 전)","formula":"day_before(query1)"},{"alias":"에러","formula":"query2"},{"conditional_formats":[{"comparator":"<","palette":"white_on_red","value":0}],"alias":"전일대비","formula":"day_before(query1) - query2","limit":{"count":50,"order":"asc"}}],"queries":[{"query":"sum:mysql.queries.errors{*,*,$engine} by {query,name}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:mysql.queries.errors{*,*,$engine} by {query,name}.as_count()","data_source":"metrics","name":"query2","aggregator":"sum"}]}],"custom_links":[{"label":"Query Metrics","link":"https://app.datadoghq.com/databases/queries?query={{query}}&dbmQMTopGraphs=[{},{\"m\":\"errors\"}]&dbQueryPanelTab=hosts&dbType=MySQL&start={{timestamp_start}}&end={{timestamp_end}}&paused=true"},{"label":"Query Metic","link":"https://app.datadoghq.com/databases/queries?query=name:shopist-mysql-rds-prod  {{query}}&dbType=MySQL&start={{timestamp_start}}&end={{timestamp_end}}&paused=true"}]},"layout":{"x":0,"y":39,"width":12,"height":4}},{"id":3415585963287680,"definition":{"title":"Select Queries - Rate","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:mysql.performance.com_select{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":43,"width":6,"height":3}},{"id":4357486538165896,"definition":{"title":"Insert Queries - Rate","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:mysql.performance.com_insert{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"green","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":43,"width":6,"height":3}},{"id":910471876768316,"definition":{"title":"Update Queries - Rate","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:mysql.performance.com_update{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":46,"width":6,"height":3}},{"id":2649987479133080,"definition":{"title":"Delete Queries - Rate","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:mysql.performance.com_delete{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":46,"width":6,"height":3}}]},"layout":{"x":0,"y":0,"width":12,"height":50}},{"id":3443265257608320,"definition":{"title":"RDS Metrics(CloudWatch Metrics)","title_align":"center","background_color":"vivid_blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":4389294685257746,"definition":{"title":"CPU Utilization by DB Instance","title_size":"13","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"avg:aws.rds.cpuutilization{$engine} by {host}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"style":{}},"layout":{"x":0,"y":0,"width":5,"height":3}},{"id":2891199199010688,"definition":{"title":"Instances with Highest CPU Utilization ","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"queries":[{"query":"avg:aws.rds.cpuutilization{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"blue","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":" y = 100% ","value":"y = 100","display_type":"error dashed"}]},"layout":{"x":5,"y":0,"width":7,"height":3}},{"id":2636957577691448,"definition":{"title":"Available RAM on Instances","title_size":"13","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"avg:aws.rds.freeable_memory{$engine} by {host}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"style":{}},"layout":{"x":0,"y":3,"width":5,"height":3}},{"id":4518990029576240,"definition":{"title":"Instances with Least Available RAM","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"forecast(top(query1, 25, 'mean', 'asc'), 'linear', 1)"}],"queries":[{"query":"avg:aws.rds.freeable_memory{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"blue","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":5,"y":3,"width":7,"height":3}},{"id":6060372157578832,"definition":{"title":"Total IOPS vs Limit","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.rds.write_iops{$engine} by {host}.as_rate()","aggregator":"avg"},{"name":"query2","data_source":"metrics","query":"avg:aws.rds.read_iops{$engine} by {host}.as_rate()","aggregator":"avg"}],"formulas":[{"formula":"query1 + query2","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":6,"width":5,"height":3}},{"id":4236703196692270,"definition":{"title":"Total IOPS vs Limit","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1 + query2"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.rds.write_iops{$engine} by {host}.as_rate()"},{"name":"query2","data_source":"metrics","query":"avg:aws.rds.read_iops{$engine} by {host}.as_rate()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":"y = 3000","value":"y = 3000","display_type":"error dashed"}]},"layout":{"x":5,"y":6,"width":7,"height":3}},{"id":1629346059445682,"definition":{"title":"Write IO","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top10(query1)"}],"queries":[{"query":"avg:aws.rds.write_iops{$engine} by {host}.as_rate()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"blue"},"display_type":"line"}],"custom_links":[]},"layout":{"x":0,"y":9,"width":6,"height":3}},{"id":6229608577612618,"definition":{"title":"Read IO","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top10(query1)"}],"queries":[{"query":"avg:aws.rds.read_iops{$engine} by {host}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"green"},"display_type":"line"}],"custom_links":[]},"layout":{"x":6,"y":9,"width":6,"height":3}},{"id":872416090240242,"definition":{"title":"Connections by Database","title_size":"13","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"max:aws.rds.database_connections{$engine} by {host}","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"style":{}},"layout":{"x":0,"y":12,"width":5,"height":3}},{"id":270347148697834,"definition":{"title":"Connections by Database","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Connections","formula":"query1"}],"queries":[{"query":"sum:aws.rds.database_connections{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"blue","line_type":"solid","line_width":"normal"},"display_type":"area"}]},"layout":{"x":5,"y":12,"width":7,"height":3}},{"id":2350398697009686,"definition":{"title":"Disk Queue Depth","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"avg:aws.rds.disk_queue_depth{$engine} by {host}","data_source":"metrics","name":"query1","aggregator":"sum"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":15,"width":5,"height":3}},{"id":1300841850381444,"definition":{"title":"Instances with Highest Disk Queue Depth","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"queries":[{"query":"avg:aws.rds.disk_queue_depth{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"blue","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":5,"y":15,"width":7,"height":3}},{"id":7846661580582260,"definition":{"title":"쓰기 최대 지연시간","title_size":"13","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"avg:aws.rds.write_latency{$engine} by {host}","data_source":"metrics","name":"query1","aggregator":"max"}],"formulas":[{"formula":"top10(query1)","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":18,"width":5,"height":3}},{"id":5080453402091764,"definition":{"title":"쓰기 최대 지연시간","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top10(query1)"}],"queries":[{"query":"max:aws.rds.write_latency{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"blue"},"display_type":"line"}],"custom_links":[]},"layout":{"x":5,"y":18,"width":7,"height":3}},{"id":3570368233925276,"definition":{"title":"읽기 최대 지연시간","title_size":"13","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"avg:aws.rds.read_latency{$engine} by {host}","data_source":"metrics","name":"query1","aggregator":"max"}],"formulas":[{"formula":"top10(query1)","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":21,"width":5,"height":3}},{"id":6336004752504326,"definition":{"title":"읽기 최대 지연시간","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top10(query1)"}],"queries":[{"query":"avg:aws.rds.write_latency{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"blue"},"display_type":"line"}],"custom_links":[]},"layout":{"x":5,"y":21,"width":7,"height":3}},{"id":8451683536960316,"definition":{"title":"Commit 최대 지연시간","title_size":"13","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"max:aws.rds.commit_latency{$engine} by {host}","data_source":"metrics","name":"query1","aggregator":"max"}],"formulas":[{"formula":"top10(query1)","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":24,"width":5,"height":3}},{"id":3575408520862322,"definition":{"title":"Commit 최대 지연시간","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top10(query1)"}],"queries":[{"query":"max:aws.rds.commit_latency{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"blue"},"display_type":"line"}],"custom_links":[]},"layout":{"x":5,"y":24,"width":7,"height":3}},{"id":2195298978642336,"definition":{"title":"Disk Queue Depth","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"sum:aws.rds.disk_queue_depth{$engine} by {host}","data_source":"metrics","name":"query1","aggregator":"sum"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":27,"width":5,"height":3}},{"id":3808023646341542,"definition":{"title":"Disk Queue Depth","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'sum', 'desc')"}],"queries":[{"query":"sum:aws.rds.disk_queue_depth{$engine} by {host}.weighted()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":5,"y":27,"width":7,"height":3}},{"id":6831343106794866,"definition":{"title":"남은 스토리지","title_size":"13","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"avg:aws.rds.free_storage_space{$engine} by {host}","data_source":"metrics","name":"query1","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":30,"width":5,"height":3}},{"id":4721291477595920,"definition":{"title":"남은 스토리지","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"forecast(query1, 'linear', 1)"}],"queries":[{"query":"avg:aws.rds.free_storage_space{$engine} by {host,dbinstanceidentifier}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":5,"y":30,"width":7,"height":3}},{"id":3168872049904908,"definition":{"title":"Swap 사용률","title_size":"13","title_align":"center","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"max:aws.rds.swap_usage{$engine} by {host}","data_source":"metrics","name":"query1","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":33,"width":5,"height":3}},{"id":2488326762574844,"definition":{"title":"Swap 사용률","title_size":"13","title_align":"center","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"max:aws.rds.swap_usage{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":5,"y":33,"width":7,"height":3}},{"id":4825658994201656,"definition":{"title":" DB Network 사용량 추이","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"avg:aws.rds.network_receive_throughput{$engine} by {host}.as_count()","data_source":"metrics","name":"query1","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":36,"width":5,"height":3}},{"id":3424794785470364,"definition":{"title":" DB Network 사용량","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"RX","formula":"query1"}],"queries":[{"query":"avg:aws.rds.network_receive_throughput{$engine} by {host}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"alias":"TX","formula":"query1"}],"queries":[{"query":"avg:aws.rds.network_transmit_throughput{$engine} by {host}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":5,"y":36,"width":7,"height":3}},{"id":5485423662610178,"definition":{"title":"차단된 트랜잭션","title_size":"13","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"sum:aws.rds.blocked_transactions{$engine} by {host}.as_count()","data_source":"metrics","name":"query1","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":39,"width":5,"height":3}},{"id":2187311380651576,"definition":{"title":"차단된 트랜잭션","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"sum:aws.rds.blocked_transactions{$engine} by {host}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"red"},"display_type":"line"}],"custom_links":[]},"layout":{"x":5,"y":39,"width":7,"height":3}},{"id":8525698373192506,"definition":{"title":"Deadlocks by Instance","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"sum:aws.rds.deadlocks{$engine} by {host}.as_count()","data_source":"metrics","name":"query0","aggregator":"avg"}],"formulas":[{"formula":"query0","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":42,"width":5,"height":3}},{"id":3629101863531728,"definition":{"title":"Deadlocks by Instance","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query0"}],"queries":[{"query":"sum:aws.rds.deadlocks{$engine} by {host}.as_count()","data_source":"metrics","name":"query0"}],"response_format":"timeseries","style":{"palette":"blue","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":5,"y":42,"width":7,"height":3}},{"id":7688023927475164,"definition":{"title":"버퍼 캐시 Hit 성공률","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"avg:aws.rds.buffer_cache_hit_ratio{$engine} by {host}","data_source":"metrics","name":"query1","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":45,"width":5,"height":3}},{"id":3573538975767146,"definition":{"title":"버퍼 캐시 Hit 성공률","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.rds.buffer_cache_hit_ratio{$engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":5,"y":45,"width":7,"height":3}},{"id":7433640646897542,"definition":{"title":"Replication Lag 지연시간","title_size":"13","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"avg:aws.rds.aurora_replica_lag{(* AND * AND * AND * AND engine:aurora-mysql OR engine:mysql*) AND $engine} by {host}","data_source":"metrics","name":"query1","aggregator":"avg"}],"formulas":[{"formula":"top10(query1)","limit":{"count":10,"order":"desc"}}]}]},"layout":{"x":0,"y":48,"width":5,"height":3}},{"id":4337520328147134,"definition":{"title":"Replication Lag 지연시간","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top10(query1)"}],"queries":[{"query":"avg:aws.rds.aurora_replica_lag{(* AND * AND * AND * AND engine:aurora-mysql OR engine:mysql*) AND $engine} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"blue"},"display_type":"line"}],"custom_links":[]},"layout":{"x":5,"y":48,"width":7,"height":3}},{"id":1044273808144476,"definition":{"title":"SELECT Throughput","title_size":"13","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"avg:aws.rds.select_throughput{$engine} by {host}.as_count()","data_source":"metrics","name":"query1","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":51,"width":5,"height":3}},{"id":4640573147968764,"definition":{"title":"SELECT Throughput","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.rds.select_throughput{$engine} by {host}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"blue"},"display_type":"line"}],"custom_links":[]},"layout":{"x":5,"y":51,"width":7,"height":3}},{"id":2114035569280434,"definition":{"title":"DML Throughput","title_size":"13","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"query":"avg:aws.rds.dmlthroughput{$engine} by {host}.as_count()","data_source":"metrics","name":"query1","aggregator":"avg"}],"formulas":[{"formula":"top10(query1)","limit":{"count":10,"order":"desc"}}]}],"style":{}},"layout":{"x":0,"y":54,"width":5,"height":3}},{"id":3442220788736894,"definition":{"title":"DML Throughput","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top10(query1)"}],"queries":[{"query":"avg:aws.rds.dmlthroughput{$engine} by {host}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"blue"},"display_type":"line"}],"custom_links":[]},"layout":{"x":5,"y":54,"width":7,"height":3}}]},"layout":{"x":0,"y":50,"width":12,"height":58}},{"id":8503884054532130,"definition":{"title":"RDS Events 및 MySQL Logs","background_color":"vivid_blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":4106444930510170,"definition":{"title":"Amazon RDS 이벤트","title_size":"16","title_align":"left","requests":[{"query":{"query_string":"source:amazon_rds $engine","data_source":"event_stream","event_size":"l"},"columns":[],"response_format":"event_list"}],"type":"list_stream"},"layout":{"x":0,"y":0,"width":6,"height":3}},{"id":22863745149842,"definition":{"title":"Amazon RDS 에러 이벤트","title_size":"16","title_align":"left","requests":[{"query":{"query_string":"status:error source:amazon_rds $engine","data_source":"event_stream","event_size":"l"},"columns":[],"response_format":"event_list"}],"type":"list_stream"},"layout":{"x":6,"y":0,"width":6,"height":3}},{"id":4638309140690384,"definition":{"title":"All Logs","title_size":"16","title_align":"left","requests":[{"response_format":"event_list","query":{"data_source":"logs_stream","query_string":"source:mysql $engine","indexes":[],"storage":"hot","sort":{"order":"desc","column":"timestamp"}},"columns":[{"field":"status_line","width":"auto"},{"field":"timestamp","width":"auto"},{"field":"host","width":"auto"},{"field":"service","width":"auto"},{"field":"content","width":"compact"}]}],"type":"list_stream"},"layout":{"x":0,"y":3,"width":6,"height":4}},{"id":7059944497061310,"definition":{"title":"Error Logs","title_size":"16","title_align":"left","requests":[{"response_format":"event_list","query":{"data_source":"logs_stream","query_string":"source:mysql status:error $engine","indexes":[],"storage":"hot","sort":{"order":"desc","column":"timestamp"}},"columns":[{"field":"status_line","width":"auto"},{"field":"timestamp","width":"auto"},{"field":"host","width":"auto"},{"field":"service","width":"auto"},{"field":"content","width":"compact"}]}],"type":"list_stream"},"layout":{"x":6,"y":3,"width":6,"height":4}}]},"layout":{"x":0,"y":108,"width":12,"height":8}},{"id":1162774048884344,"definition":{"title":"DB Runtime Query(APM&DBM Metrics)","background_color":"vivid_blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":8842085523208192,"definition":{"title":"DB 쿼리호출 빈도 (점선은 한주전 호출 빈도)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"on_right_yaxis":false,"formulas":[{"formula":"query1"}],"queries":[{"query":"sum:trace.mysql.query.hits{$engine} by {service,env}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"on_right_yaxis":false,"formulas":[{"formula":"week_before(query1)"}],"queries":[{"query":"sum:trace.mysql.query.hits{$engine} by {service,env}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":12,"height":3}},{"id":4548421214086874,"definition":{"title":"2초 이상 소요된 쿼리","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"spans","name":"query1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"service:*mysql* @duration:>=2000000000 $engine"}}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":3,"width":6,"height":3}},{"id":7602221642841176,"definition":{"title":"2초 이상 소요된 쿼리","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"지연시간(ms)","formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"data_source":"spans","name":"query1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"resource_name","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"service:*mysql* @duration:>=2000000000 $engine"}}]}]},"layout":{"x":6,"y":3,"width":6,"height":3}},{"id":506958978217968,"definition":{"title":"쿼리별 수행시간","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:trace.mysql.query.duration{$engine} by {resource_name,service}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":6,"width":6,"height":3}},{"id":4712480343691804,"definition":{"title":"쿼리 수행시간 합산(요청수 x 수행시간)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1 * query2"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"avg:trace.mysql.query{$engine} by {resource_name}","data_source":"metrics","name":"query1"},{"query":"avg:trace.mysql.query.hits{$engine} by {resource_name}","data_source":"metrics","name":"query2"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":6,"width":6,"height":3}},{"id":838100007766480,"definition":{"title":"Top 10 쿼리 ","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"data_source":"database_queries","name":"query1","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@db.statement","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"dbm_type:activity $engine"}}]}],"custom_links":[{"label":"Query Samples","link":"https://app.datadoghq.com/databases/samples?query=dbm_type:activity&agg_m=count&agg_q=@db.statement&agg_t=count&cols=&sort_m=&sort_t=&top_n=10&top_o=top&viz=toplist&x_missing=true"}],"style":{}},"layout":{"x":0,"y":9,"width":6,"height":4}},{"id":6948212066930466,"definition":{"title":"Top 10 쿼리 ","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"database_queries","name":"query1","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@db.statement","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"dbm_type:activity $engine"}}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[{"label":"Query Samples","link":"https://app.datadoghq.com/databases/samples?query=dbm_type:activity&agg_m=count&agg_q=@db.statement&agg_t=count&top_n=10&top_o=top&viz=toplist&x_missing=true"}]},"layout":{"x":6,"y":9,"width":6,"height":4}},{"id":7667952263442694,"definition":{"title":"Top 10 쿼리 Cost ","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"data_source":"database_queries","name":"query1","indexes":["*"],"compute":{"aggregation":"avg","metric":"@db.plan.cost"},"group_by":[{"facet":"@db.statement","limit":10,"sort":{"order":"desc","aggregation":"avg","metric":"@db.plan.cost"}}],"search":{"query":"dbm_type:plan $engine"}}]}],"custom_links":[{"label":"Explain Plans","link":"https://app.datadoghq.com/databases/samples?query=dbm_type:plan&agg_m=@db.plan.cost&agg_q=@db.statement&agg_t=avg&top_n=10&top_o=top&viz=toplist&x_missing=true&start={{timestamp_start}}&end={{timestamp_end}}&paused=false"}],"style":{}},"layout":{"x":0,"y":13,"width":6,"height":4}},{"id":7652144345414936,"definition":{"title":"Top 10 쿼리 Cost ","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"database_queries","name":"query1","indexes":["*"],"compute":{"aggregation":"avg","metric":"@db.plan.cost"},"group_by":[{"facet":"@db.statement","limit":10,"sort":{"order":"desc","aggregation":"avg","metric":"@db.plan.cost"}}],"search":{"query":"dbm_type:plan $engine"}}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[{"label":"Explain Plans","link":"https://app.datadoghq.com/databases/samples?query=dbm_type:plan&agg_m=@db.plan.cost&agg_q=@db.statement&agg_t=avg&top_n=10&top_o=top&viz=toplist&x_missing=true&start={{timestamp_start}}&end={{timestamp_end}}&paused=false"}]},"layout":{"x":6,"y":13,"width":6,"height":4}},{"id":4796329784307750,"definition":{"title":"쿼리별 소요시간 비교","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"conditional_formats":[],"cell_display_mode":"number","alias":"쿼리수","formula":"query2","limit":{"count":1000,"order":"desc"}},{"alias":"쿼리 소요시간(하루 전)","conditional_formats":[],"cell_display_mode":"number","formula":"day_before(query3)"},{"alias":"쿼리 소요시간(현재)","conditional_formats":[],"cell_display_mode":"number","formula":"query4"},{"alias":"전일대비","conditional_formats":[{"comparator":">","palette":"white_on_red","value":0},{"comparator":"<","palette":"white_on_green","value":0}],"cell_display_mode":"number","formula":"day_before(query3) - query4"}],"queries":[{"data_source":"database_queries","name":"query2","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@db.statement","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@db.query_signature","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@db.metadata.tables","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"$engine dbm_type:activity"}},{"data_source":"database_queries","name":"query3","indexes":["*"],"compute":{"aggregation":"avg","metric":"@duration"},"group_by":[{"facet":"@db.statement","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@db.query_signature","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@db.metadata.tables","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"$engine dbm_type:activity"}},{"data_source":"database_queries","name":"query4","indexes":["*"],"compute":{"aggregation":"avg","metric":"@duration"},"group_by":[{"facet":"@db.statement","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@db.query_signature","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@db.metadata.tables","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"$engine dbm_type:activity"}}],"text_formats":[]}],"custom_links":[{"override_label":"containers","is_hidden":true},{"override_label":"hosts","is_hidden":true},{"override_label":"logs","is_hidden":true},{"override_label":"traces","is_hidden":true},{"override_label":"profiles","is_hidden":true},{"label":"Query Samples","link":"https://app.datadoghq.com/databases/samples?query=dbm_type%3Aactivity%20{{@db.statement}}&agg_m=@duration&agg_q=@db.statement&agg_t=avg&analyticsOptions=[\"line\",\"dog_classic\",null,null,\"value\"]&cols=&sort_m=&sort_t=&top_n=10&top_o=top&viz=stream&x_missing=true&start={{timestamp_start}}&end={{timestamp_end}}&paused=false"}]},"layout":{"x":0,"y":17,"width":12,"height":5}},{"id":8594518891370452,"definition":{"title":"코멘트별 소요시간 비교","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"conditional_formats":[],"cell_display_mode":"number","alias":"쿼리수","formula":"query2","limit":{"count":100,"order":"desc"}},{"alias":"쿼리 소요시간(하루 전)","conditional_formats":[],"cell_display_mode":"number","formula":"day_before(query3)"},{"alias":"쿼리 소요시간(현재)","conditional_formats":[],"cell_display_mode":"number","formula":"query4"},{"alias":"전일대비","conditional_formats":[{"comparator":">","palette":"white_on_red","value":0},{"comparator":"<","palette":"white_on_green","value":0}],"cell_display_mode":"number","formula":"day_before(query3) - query4"}],"queries":[{"data_source":"database_queries","name":"query2","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@db.metadata.comments","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@db.metadata.tables","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"$engine dbm_type:activity"}},{"data_source":"database_queries","name":"query3","indexes":["*"],"compute":{"aggregation":"avg","metric":"@duration"},"group_by":[{"facet":"@db.metadata.comments","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@db.metadata.tables","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"$engine dbm_type:activity"}},{"data_source":"database_queries","name":"query4","indexes":["*"],"compute":{"aggregation":"avg","metric":"@duration"},"group_by":[{"facet":"@db.metadata.comments","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@db.metadata.tables","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"$engine dbm_type:activity"}}],"text_formats":[]}],"custom_links":[{"override_label":"containers","is_hidden":true},{"override_label":"hosts","is_hidden":true},{"override_label":"logs","is_hidden":true},{"override_label":"traces","is_hidden":true},{"override_label":"profiles","is_hidden":true},{"label":"Query Samples","link":"https://app.datadoghq.com/databases/samples?query=dbm_type%3Aactivity%20{{@db.statement}}&agg_m=@duration&agg_q=@db.statement&agg_t=avg&analyticsOptions=[\"line\",\"dog_classic\",null,null,\"value\"]&cols=&sort_m=&sort_t=&top_n=10&top_o=top&viz=stream&x_missing=true&start={{timestamp_start}}&end={{timestamp_end}}&paused=false"}]},"layout":{"x":0,"y":22,"width":12,"height":5}},{"id":5932377802931446,"definition":{"title":"쿼리별 Cost 비교","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"쿼리수","formula":"query1","limit":{"count":1000,"order":"desc"}},{"alias":"쿼리 Cost(하루 전)","conditional_formats":[],"cell_display_mode":"number","formula":"day_before(query2)"},{"alias":"쿼리 Cost(현재)","conditional_formats":[],"cell_display_mode":"number","formula":"query3"},{"alias":"전일대비","conditional_formats":[{"comparator":"<","palette":"white_on_green","value":0},{"comparator":">","palette":"white_on_red","value":0}],"cell_display_mode":"number","formula":"day_before(query2) - query3"}],"queries":[{"data_source":"database_queries","name":"query1","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@db.statement","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@db.plan.signature","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@db.metadata.tables","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"$engine dbm_type:plan"}},{"data_source":"database_queries","name":"query2","indexes":["*"],"compute":{"aggregation":"avg","metric":"@db.plan.cost"},"group_by":[{"facet":"@db.statement","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@db.plan.signature","limit":10,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@db.metadata.tables","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"$engine dbm_type:plan"}},{"data_source":"database_queries","name":"query3","indexes":["*"],"compute":{"aggregation":"avg","metric":"@db.plan.cost"},"group_by":[{"facet":"@db.statement","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"$engine dbm_type:plan"}}],"text_formats":[]}],"custom_links":[{"override_label":"containers","is_hidden":true},{"override_label":"hosts","is_hidden":true},{"override_label":"logs","is_hidden":true},{"override_label":"traces","is_hidden":true},{"override_label":"profiles","is_hidden":true},{"label":"Explain Plans","link":"https://app.datadoghq.com/databases/samples?query=dbm_type:plan&agg_m=@db.plan.cost&agg_q=@db.statement&agg_t=avg&top_n=10&top_o=top&viz=toplist&x_missing=true&start={{timestamp_start}}&end={{timestamp_end}}&paused=false"}]},"layout":{"x":0,"y":27,"width":12,"height":5}}]},"layout":{"x":0,"y":116,"width":12,"height":33,"is_column_break":true}},{"id":2460237493786170,"definition":{"title":"코멘트별 Cost 비교","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"쿼리수","formula":"query1","limit":{"count":10,"order":"desc"}},{"alias":"쿼리 Cost(하루 전)","conditional_formats":[],"cell_display_mode":"number","formula":"day_before(query2)"},{"alias":"쿼리 Cost(현재)","conditional_formats":[],"cell_display_mode":"number","formula":"query3"},{"alias":"전일대비","conditional_formats":[{"comparator":"<","palette":"white_on_green","value":0},{"comparator":">","palette":"white_on_red","value":0}],"cell_display_mode":"number","formula":"day_before(query2) - query3"}],"queries":[{"data_source":"database_queries","name":"query1","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@db.metadata.comments","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"$engine dbm_type:plan"}},{"data_source":"database_queries","name":"query2","indexes":["*"],"compute":{"aggregation":"avg","metric":"@db.plan.cost"},"group_by":[{"facet":"@db.metadata.comments","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"$engine dbm_type:plan"}},{"data_source":"database_queries","name":"query3","indexes":["*"],"compute":{"aggregation":"avg","metric":"@db.plan.cost"},"group_by":[{"facet":"@db.metadata.comments","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"$engine dbm_type:plan"}}],"text_formats":[]}],"custom_links":[{"override_label":"containers","is_hidden":true},{"override_label":"hosts","is_hidden":true},{"override_label":"logs","is_hidden":true},{"override_label":"traces","is_hidden":true},{"override_label":"profiles","is_hidden":true},{"label":"Explain Plans","link":"https://app.datadoghq.com/databases/samples?query=dbm_type:plan&agg_m=@db.plan.cost&agg_q=@db.statement&agg_t=avg&top_n=10&top_o=top&viz=toplist&x_missing=true&start={{timestamp_start}}&end={{timestamp_end}}&paused=false"}]},"layout":{"x":0,"y":0,"width":12,"height":5}}],"template_variables":[{"name":"engine","prefix":"engine","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed"}