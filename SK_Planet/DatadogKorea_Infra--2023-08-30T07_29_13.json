{"title":"Datadog Korea: Infra","description":"datadog_demo_keep:true","widgets":[{"id":6121562475637314,"definition":{"title":"메트릭 모니터링 알람","background_color":"orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":8122176519538606,"definition":{"title":"모니터링 알람 현황","title_size":"13","title_align":"left","type":"manage_status","display_format":"countsAndList","color_preference":"background","hide_zero_counts":false,"query":" $env $service","sort":"priority,asc","count":50,"start":0,"summary_type":"combined","show_priority":true,"show_last_triggered":true},"layout":{"x":0,"y":0,"width":12,"height":6}}]},"layout":{"x":0,"y":0,"width":12,"height":7}},{"id":3761050253278890,"definition":{"title":"Cost Optimization","background_color":"orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6516846064371986,"definition":{"title":"호스트 사용 현황(N/A: Fargate): 1. 최대 CPU, 메모리 사용량 확인 > 2. 코어당 메모리 비율 확인 > 3. 최적의 Instance Type 선정 > 비용 절감(1% 미만 빨간색, 40% 미만 노란색 표기)","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"할당된 CPU","conditional_formats":[],"cell_display_mode":"number","formula":"query1"},{"alias":"할당된 메모리","conditional_formats":[],"formula":"query3"},{"alias":"최대 CPU 사용률","conditional_formats":[{"comparator":"<","palette":"white_on_yellow","value":40},{"comparator":"<","palette":"white_on_red","value":1}],"formula":"100 - query4","limit":{"count":500,"order":"asc"}},{"alias":"최대 메모리 사용률","conditional_formats":[{"comparator":"<","palette":"white_on_yellow","value":0.4}],"formula":"query6"},{"alias":"1코어당 메모리 사용 비율","formula":"((query3 / 1000000000) * query6) / (query1 * (100 - query4) / 100)"},{"alias":"최대 동시실행 수","conditional_formats":[],"formula":"query2 / query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:system.cpu.num_cores{*} by {aws_account,name,instance-type}","aggregator":"avg"},{"name":"query3","data_source":"metrics","query":"avg:system.mem.total{*} by {aws_account,name,instance-type}","aggregator":"avg"},{"name":"query4","data_source":"metrics","query":"min:system.cpu.idle{*} by {aws_account,name,instance-type}","aggregator":"min"},{"name":"query6","data_source":"metrics","query":"max:system.mem.pct_usable{*} by {aws_account,name,instance-type}","aggregator":"max"},{"name":"query2","data_source":"metrics","query":"sum:system.cpu.num_cores{*} by {aws_account,name,instance-type}","aggregator":"last"}]}],"has_search_bar":"always"},"layout":{"x":0,"y":0,"width":8,"height":4}},{"id":3570124983523872,"definition":{"title":"할당된 CPU","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1mo"},"type":"timeseries","requests":[{"formulas":[{"alias":"Cores","formula":"query2"}],"queries":[{"name":"query2","data_source":"metrics","query":"sum:system.cpu.num_cores{$env,$service} by {aws_account,name,instance-type}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":6422638507239724,"definition":{"title":"할당된 메모리","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1mo"},"type":"timeseries","requests":[{"formulas":[{"alias":"메모리","formula":"query2"}],"queries":[{"name":"query2","data_source":"metrics","query":"sum:system.mem.total{$env,$service} by {aws_account,name,instance-type}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":2700564307045184,"definition":{"title":"호스트 최대 CPU 사용률(데이터 포인트가 샘플링 되어 마우스 드래그를 통해 정확한 시간대 확인 권장)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"100 - query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"min:system.cpu.idle{$env,$service} by {name}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":"y = 100","value":"y = 100","display_type":"error bold"}]},"layout":{"x":0,"y":4,"width":6,"height":3}},{"id":6117740788397858,"definition":{"title":"호스트 최대 메모리 사용률(데이터 포인트가 샘플링 되어 마우스 드래그를 통해 정확한 시간대 확인 권장)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"max:system.mem.pct_usable{$env,$service} by {name}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":"y = 1","value":"y = 1","display_type":"error bold"}]},"layout":{"x":6,"y":4,"width":6,"height":3}},{"id":4310321708632660,"definition":{"title":"컨테이너 사용 현황: 1. 최대 CPU, 메모리 사용량 확인> 2. 적합한 Request&Limit 선정 > 3. 최적의 스케쥴링 동작 > 비용 절감 및 장애 최소화(1% 미만 빨간색, 40% 미만 노란색 표기)","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"CPU 제한","formula":"query2"},{"alias":"메모리 제한","formula":"query6"},{"alias":"최대 CPU 사용률","conditional_formats":[{"comparator":"<","palette":"white_on_red","value":1},{"comparator":"<","palette":"white_on_yellow","value":40}],"formula":"100 * (query1 / query2)","limit":{"count":500,"order":"asc"}},{"alias":"최대 메모리 사용률","conditional_formats":[{"comparator":"<","palette":"white_on_red","value":1},{"comparator":"<","palette":"white_on_yellow","value":40}],"formula":"100 * (query4 / query6)"},{"alias":"컨테이너 최대 동시실행 수","formula":"query7 / query2"}],"queries":[{"query":"max:container.cpu.usage{name:*,image_tag:*,container_name:*} by {aws_account,name,short_image,image_tag,container_name,runtime}","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"max:container.cpu.limit{name:*,image_tag:*,container_name:*} by {aws_account,name,short_image,image_tag,container_name,runtime}","data_source":"metrics","name":"query2","aggregator":"avg"},{"query":"max:container.memory.usage{name:*,image_tag:*,container_name:*} by {aws_account,name,short_image,image_tag,container_name,runtime}","data_source":"metrics","name":"query4","aggregator":"avg"},{"query":"max:container.memory.limit{name:*,image_tag:*,container_name:*} by {aws_account,name,short_image,image_tag,container_name,runtime}","data_source":"metrics","name":"query6","aggregator":"avg"},{"query":"sum:container.cpu.limit{name:*,image_tag:*,container_name:*} by {aws_account,name,short_image,image_tag,container_name,runtime}","data_source":"metrics","name":"query7","aggregator":"avg"}]}]},"layout":{"x":0,"y":7,"width":8,"height":4}},{"id":1596201296301376,"definition":{"title":"전체 컨테이너 CPU 사용량","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Core","formula":"query1"}],"queries":[{"query":"sum:container.cpu.usage{*} by {aws_account,name,short_image,image_tag,container_name,runtime}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"markers":[]},"layout":{"x":8,"y":7,"width":4,"height":2}},{"id":5793240220407224,"definition":{"title":"전체 컨테이너 메모리 사용량","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"메모리","formula":"query1"}],"queries":[{"query":"sum:container.memory.usage{*} by {aws_account,name,short_image,image_tag,container_name,runtime}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"markers":[]},"layout":{"x":8,"y":9,"width":4,"height":2}},{"id":324504729249832,"definition":{"title":"컨테이너 최대 CPU 사용률","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"최대 CPU 사용률","formula":"100 * (query1 / query2)"}],"queries":[{"query":"max:container.cpu.usage{*,*} by {aws_account,name,short_image,image_tag,container_name,runtime}","data_source":"metrics","name":"query1"},{"query":"max:container.cpu.limit{*,*} by {aws_account,name,short_image,image_tag,container_name,runtime}","data_source":"metrics","name":"query2"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":"y = 100","value":"y = 100","display_type":"error bold"}]},"layout":{"x":0,"y":11,"width":6,"height":3}},{"id":6020657743493354,"definition":{"title":"컨테이너 최대 메모리 사용률","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"최대 메모리 사용률","formula":"100 * (query1 / query2)"}],"queries":[{"query":"max:container.memory.usage{*,*} by {aws_account,name,short_image,image_tag,container_name,runtime}","data_source":"metrics","name":"query1"},{"query":"max:container.memory.limit{*,*} by {aws_account,name,short_image,image_tag,container_name,runtime}","data_source":"metrics","name":"query2"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":"y = 100","value":"y = 100","display_type":"error bold"}]},"layout":{"x":6,"y":11,"width":6,"height":3}},{"id":3532940611486164,"definition":{"title":"RDS 사용 현황(1% 미만 빨간색, 40% 미만 노란색 표기)","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"최대 CPU 사용률","conditional_formats":[{"comparator":"<","palette":"white_on_red","value":1},{"comparator":"<","palette":"white_on_yellow","value":40}],"formula":"query1","limit":{"count":500,"order":"asc"}},{"alias":"메모리 가용량","conditional_formats":[],"formula":"query2"},{"alias":"최대 커넥션 수","formula":"query3"}],"queries":[{"name":"query1","data_source":"metrics","query":"max:aws.rds.cpuutilization{*} by {aws_account,host,dbinstanceclass}","aggregator":"max"},{"name":"query2","data_source":"metrics","query":"min:aws.rds.freeable_memory{*} by {aws_account,host,dbinstanceclass}","aggregator":"min"},{"name":"query3","data_source":"metrics","query":"max:aws.rds.database_connections{*} by {aws_account,host,dbinstanceclass}","aggregator":"max"}]}]},"layout":{"x":0,"y":14,"width":8,"height":4}},{"id":7282770945325866,"definition":{"title":"RDS 최대 CPU 사용률","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"최대 CPU 사용률","formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"max:aws.rds.cpuutilization{*} by {host}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"max":"auto"},"markers":[{"label":"y = 100","value":"y = 100","display_type":"error bold"}]},"layout":{"x":8,"y":14,"width":4,"height":2}},{"id":3061301049283612,"definition":{"title":"RDS 최대 커넥션 수","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"최대 커넥션 수","formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"max:aws.rds.database_connections{*} by {host}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"max":"auto"},"markers":[]},"layout":{"x":8,"y":16,"width":4,"height":2}},{"id":908834303592954,"definition":{"title":"ElastiCache 현황","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"최대 CPU 사용률","conditional_formats":[{"comparator":"<","palette":"white_on_red","value":1},{"comparator":"<","palette":"white_on_red","value":40}],"cell_display_mode":"number","formula":"query1","limit":{"count":500,"order":"desc"}},{"alias":"최대 메모리 사용률","conditional_formats":[{"comparator":"<","palette":"white_on_red","value":1},{"comparator":"<","palette":"white_on_yellow","value":40}],"formula":"query2"},{"conditional_formats":[{"comparator":"<","palette":"white_on_red","value":1},{"comparator":"<","palette":"white_on_yellow","value":40}],"alias":"여유 메모리","formula":"query3"}],"queries":[{"query":"max:aws.elasticache.cpuutilization{$env,$service,*} by {name}","data_source":"metrics","name":"query1","aggregator":"max"},{"query":"max:aws.elasticache.database_memory_usage_percentage{$env,$service,*} by {name}","data_source":"metrics","name":"query2","aggregator":"max"},{"query":"max:aws.elasticache.freeable_memory{$env,$service,*} by {name}","data_source":"metrics","name":"query3","aggregator":"max"}]}]},"layout":{"x":0,"y":18,"width":8,"height":4}},{"id":5674555173641992,"definition":{"title":"ElastiCache CPU 사용률","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"최대 CPU 사용률","formula":"query1"}],"queries":[{"query":"max:aws.elasticache.cpuutilization{$env,$service,*} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":"y = 100","value":"y = 100","display_type":"error bold"}]},"layout":{"x":8,"y":18,"width":4,"height":2}},{"id":4389944878794786,"definition":{"title":"ElastiCache 메모리 사용률","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"max:aws.elasticache.database_memory_usage_percentage{$env,$service,*} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[{"label":"y = 100","value":"y = 100","display_type":"error bold"}]},"layout":{"x":8,"y":20,"width":4,"height":2}},{"id":4771646976822996,"definition":{"title":"DynamoDB 현황","title_size":"13","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"Provisioned Read Unit","formula":"query1"},{"alias":"Provisioned Write Unit","formula":"query2"},{"alias":"최대 Read Unit","formula":"query3"},{"alias":"최대 Write Unit","formula":"query4"},{"alias":"Read Unit 사용률","formula":"query3 / query1 * 100","limit":{"count":500,"order":"asc"},"conditional_formats":[{"comparator":"=","palette":"white_on_red","value":0},{"comparator":"<","palette":"white_on_yellow","value":40}]},{"alias":"Write Unit 사용률","formula":"query4 / query2 * 100","conditional_formats":[{"comparator":"=","palette":"white_on_red","value":0},{"comparator":"<","palette":"white_on_yellow","value":40}]}],"queries":[{"data_source":"metrics","name":"query1","query":"max:aws.dynamodb.provisioned_read_capacity_units{$env,$service,*,name:*} by {aws_account,name}","aggregator":"avg"},{"data_source":"metrics","name":"query2","query":"max:aws.dynamodb.provisioned_write_capacity_units{$env,$service,*,name:*} by {aws_account,name}","aggregator":"avg"},{"data_source":"metrics","name":"query3","query":"max:aws.dynamodb.consumed_read_capacity_units{$env,$service,*,name:*} by {aws_account,name}","aggregator":"avg"},{"data_source":"metrics","name":"query4","query":"max:aws.dynamodb.consumed_write_capacity_units{$env,$service,*,name:*} by {aws_account,name}","aggregator":"avg"}]}]},"layout":{"x":0,"y":22,"width":8,"height":3}},{"id":247709576491214,"definition":{"title":"DynamoDB Read/Write Unit 사용률","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Read Unit 사용률","formula":"query3 / query1 * 100"},{"alias":"Write Unit 사용률","formula":"query4 / query2 * 100"}],"queries":[{"data_source":"metrics","name":"query1","query":"max:aws.dynamodb.provisioned_read_capacity_units{$env,$service,*,name:*} by {aws_account,name}"},{"data_source":"metrics","name":"query2","query":"max:aws.dynamodb.provisioned_write_capacity_units{$env,$service,*,name:*} by {aws_account,name}"},{"data_source":"metrics","name":"query3","query":"max:aws.dynamodb.consumed_read_capacity_units{$env,$service,*,name:*} by {aws_account,name}"},{"data_source":"metrics","name":"query4","query":"max:aws.dynamodb.consumed_write_capacity_units{$env,$service,*,name:*} by {aws_account,name}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":"y = 100","value":"y = 100","display_type":"error bold"}]},"layout":{"x":8,"y":22,"width":4,"height":3}},{"id":611485236443990,"definition":{"title":"Disk 사용률 (%) / EFS 제외","title_size":"13","title_align":"center","time":{"live_span":"1d"},"type":"query_table","requests":[{"formulas":[{"alias":"Used","formula":"query2"},{"alias":"Total","formula":"query3"},{"alias":"Used (%)","cell_display_mode":"bar","conditional_formats":[{"comparator":">=","value":9,"palette":"white_on_red"}],"formula":"query4","limit":{"count":500,"order":"asc"}}],"response_format":"scalar","queries":[{"query":"avg:system.disk.used{!device:fs*,$env,$service} by {name,host,instance-type,device}","data_source":"metrics","name":"query2","aggregator":"avg"},{"query":"avg:system.disk.total{!device:fs*,$env,$service} by {name,host,instance-type,device}","data_source":"metrics","name":"query3","aggregator":"avg"},{"query":"avg:system.disk.in_use{!device:fs*,$env,$service} by {name,host,instance-type,device}","data_source":"metrics","name":"query4","aggregator":"avg"},{"query":"avg:system.disk.in_use{!device:fs*,$env,$service} by {name,host,instance-type,device}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":0,"y":25,"width":8,"height":4}},{"id":1409202939396586,"definition":{"title":"EBS 수량","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query2"}],"queries":[{"name":"query2","data_source":"metrics","query":"sum:aws.ebs.status.ok{!device:fs*,$env,$service} by {aws_account,attachment-instance-id}"}],"response_format":"timeseries","style":{"palette":"semantic","line_type":"solid","line_width":"normal"},"display_type":"area"}]},"layout":{"x":8,"y":25,"width":4,"height":2}},{"id":2048537726796426,"definition":{"title":"Mount 되지 않은 EBS","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"cell_display_mode":"number","conditional_formats":[{"comparator":">","palette":"white_on_red","value":0}],"formula":"query2","limit":{"count":500,"order":"desc"}}],"queries":[{"name":"query2","data_source":"metrics","query":"sum:aws.ebs.status.ok{!device:fs*,$env,$service,!attachment-status:attached} by {aws_account,volume-id,size,status}","aggregator":"last"}]}]},"layout":{"x":8,"y":27,"width":4,"height":2}},{"id":6990318599756220,"definition":{"title":"EFS 사용 용량","title_size":"13","title_align":"center","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"사용량","formula":"query2","limit":{"count":500,"order":"desc"}}],"queries":[{"query":"sum:aws.efs.storage_bytes{$env,$service} by {aws_account,filesystemid,name}","data_source":"metrics","name":"query2","aggregator":"last"}]}]},"layout":{"x":0,"y":29,"width":8,"height":3}},{"id":2395425309054756,"definition":{"title":"EFS 사용 용량","title_size":"13","title_align":"center","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1mo"},"type":"timeseries","requests":[{"formulas":[{"alias":"Used","formula":"query2"}],"queries":[{"query":"avg:aws.efs.storage_bytes{$env,$service} by {aws_account,name,filesystemid,storageclass}","data_source":"metrics","name":"query2"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]},"layout":{"x":8,"y":29,"width":4,"height":3}},{"id":6909912793846372,"definition":{"title":"Total s3 buckets size","title_size":"13","title_align":"left","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"사용량","formula":"query1","limit":{"count":500,"order":"desc"}}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.s3.bucket_size_bytes{$env,$service} by {aws_account,bucketname}","aggregator":"last"}]}]},"layout":{"x":0,"y":32,"width":8,"height":3}},{"id":7815144106728026,"definition":{"title":"Total s3 buckets size","title_size":"13","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1mo"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.s3.bucket_size_bytes{$env,$service} by {aws_account,bucketname,storagetype}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"custom_links":[]},"layout":{"x":8,"y":32,"width":4,"height":3}},{"id":1988312081121388,"definition":{"title":"Total s3 buckets bytes downloaded","title_size":"13","title_align":"left","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"사용량","formula":"query1","limit":{"count":500,"order":"desc"}}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.s3.bytes_downloaded{$env,$service,*} by {aws_account,bucketname}.as_count()","aggregator":"sum"}]}]},"layout":{"x":0,"y":35,"width":8,"height":3}},{"id":2719351009966300,"definition":{"title":"Total s3 buckets bytes downloaded","title_size":"13","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1mo"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.s3.bytes_downloaded{$env,$service,*} by {aws_account,bucketname,storagetype}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"custom_links":[]},"layout":{"x":8,"y":35,"width":4,"height":3}},{"id":3774541105890748,"definition":{"title":"호스트에서 외부로 나가는 트래픽","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"Bytes Sent","formula":"query1","limit":{"count":100,"order":"desc"}},{"alias":"Bytes Received","formula":"query2"},{"alias":"Retransmits","formula":"query3"}],"queries":[{"data_source":"network","name":"query1","search":{"query":"network.server.ip_type:other -server_domain:*datadoghq.com OR -server_domain:*amazonaws.com "},"indexes":["netflow-search-v2"],"compute":{"aggregation":"sum","metric":"network.bytes_written","interval":600000},"group_by":[{"facet":"network.client.host","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}},{"facet":"network.server.auto_grouping_tags","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}}]},{"data_source":"network","name":"query2","search":{"query":"network.server.ip_type:other -server_domain:*datadoghq.com OR -server_domain:*amazonaws.com "},"indexes":["netflow-search-v2"],"compute":{"aggregation":"sum","metric":"network.bytes_read","interval":600000},"group_by":[{"facet":"network.client.host","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}},{"facet":"network.server.auto_grouping_tags","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}}]},{"data_source":"network","name":"query3","search":{"query":"network.server.ip_type:other -server_domain:*datadoghq.com OR -server_domain:*amazonaws.com "},"indexes":["netflow-search-v2"],"compute":{"aggregation":"sum","metric":"network.retransmits","interval":600000},"group_by":[{"facet":"network.client.host","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}},{"facet":"network.server.auto_grouping_tags","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}}]}]}]},"layout":{"x":0,"y":38,"width":8,"height":3}},{"id":1325561379973278,"definition":{"title":"호스트에서 외부로 나가는 트래픽","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1mo"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"network","name":"query1","search":{"query":"network.server.ip_type:other -server_domain:(*datadoghq.com OR *amazonaws.com)"},"indexes":["netflow-search-v2"],"compute":{"aggregation":"sum","metric":"network.bytes_written","interval":600000},"group_by":[{"facet":"network.client.host","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}},{"facet":"network.server.auto_grouping_tags","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}}]},{"data_source":"network","name":"query2","search":{"query":"network.server.ip_type:other -server_domain:(*datadoghq.com OR *amazonaws.com)"},"indexes":["netflow-search-v2"],"compute":{"aggregation":"sum","metric":"network.bytes_read","interval":600000},"group_by":[{"facet":"network.client.host","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_read"}},{"facet":"network.server.auto_grouping_tags","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_read"}}]},{"data_source":"network","name":"query3","search":{"query":"network.server.ip_type:other -server_domain:(*datadoghq.com OR *amazonaws.com)"},"indexes":["netflow-search-v2"],"compute":{"aggregation":"sum","metric":"network.retransmits","interval":600000},"group_by":[{"facet":"network.client.host","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.retransmits"}},{"facet":"network.server.auto_grouping_tags","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.retransmits"}}]}],"formulas":[{"formula":"query1","alias":"Bytes Sent"},{"formula":"query2","alias":"Bytes Received"},{"formula":"query3","alias":"Retransmits"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]},"layout":{"x":8,"y":38,"width":4,"height":3}},{"id":2974340015600468,"definition":{"title":"호스트에서 80/443을 제외한 트래픽","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"Bytes Sent","formula":"query1","limit":{"count":100,"order":"desc"}},{"alias":"Bytes Received","formula":"query2"},{"alias":"Retransmits","formula":"query3"}],"queries":[{"data_source":"network","name":"query1","search":{"query":"network.server.ip_type:other OR -server_domain:(*datadoghq.com OR *amazonaws.com) OR -network.server.port:(80 OR 443) "},"indexes":["netflow-search-v2"],"compute":{"aggregation":"sum","metric":"network.bytes_written","interval":300000},"group_by":[{"facet":"network.client.host","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}},{"facet":"network.server.port","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}}]},{"data_source":"network","name":"query2","search":{"query":"network.server.ip_type:other -server_domain:(*datadoghq.com OR *amazonaws.com)"},"indexes":["netflow-search-v2"],"compute":{"aggregation":"sum","metric":"network.bytes_read","interval":21600000},"group_by":[{"facet":"network.client.host","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}},{"facet":"network.server.port","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}}]},{"data_source":"network","name":"query3","search":{"query":"network.server.ip_type:other -server_domain:(*datadoghq.com OR *amazonaws.com)"},"indexes":["netflow-search-v2"],"compute":{"aggregation":"sum","metric":"network.retransmits","interval":21600000},"group_by":[{"facet":"network.client.host","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}},{"facet":"network.server.port","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}}]}]}]},"layout":{"x":0,"y":41,"width":8,"height":3}},{"id":3496602501243962,"definition":{"title":"호스트에서 80/443을 제외한 트래픽","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1mo"},"type":"timeseries","requests":[{"formulas":[{"alias":"Bytes Sent","formula":"query1"},{"alias":"Bytes Received","formula":"query2"},{"alias":"Retransmits","formula":"query3"}],"queries":[{"data_source":"network","name":"query1","search":{"query":"network.server.ip_type:other OR -server_domain:(*datadoghq.com OR *amazonaws.com) OR -(network.server.port:(80 OR 443)) "},"indexes":["netflow-search-v2"],"compute":{"aggregation":"sum","metric":"network.bytes_written","interval":21600000},"group_by":[{"facet":"network.client.host","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}},{"facet":"network.server.port","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_written"}}]},{"data_source":"network","name":"query2","search":{"query":"network.server.ip_type:other OR -server_domain:(*datadoghq.com OR *amazonaws.com) OR -(network.server.port:(80 OR 443)) "},"indexes":["netflow-search-v2"],"compute":{"aggregation":"sum","metric":"network.bytes_read","interval":21600000},"group_by":[{"facet":"network.client.host","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_read"}},{"facet":"network.server.port","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.bytes_read"}}]},{"data_source":"network","name":"query3","search":{"query":"network.server.ip_type:other OR -server_domain:(*datadoghq.com OR *amazonaws.com) OR -(network.server.port:(80 OR 443)) "},"indexes":["netflow-search-v2"],"compute":{"aggregation":"sum","metric":"network.retransmits","interval":21600000},"group_by":[{"facet":"network.client.host","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.retransmits"}},{"facet":"network.server.port","should_exclude_missing":true,"limit":10,"sort":{"aggregation":"sum","metric":"network.retransmits"}}]}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]},"layout":{"x":8,"y":41,"width":4,"height":3}},{"id":4759558720953378,"definition":{"title":"NLB Current Status","title_size":"13","title_align":"center","time":{"live_span":"1mo"},"type":"query_table","requests":[{"formulas":[{"alias":"Connections","conditional_formats":[{"comparator":"=","palette":"white_on_red","value":0}],"formula":"default_zero(query1)","limit":{"count":500,"order":"asc"}},{"alias":"Health Host","conditional_formats":[{"comparator":"=","palette":"white_on_yellow","value":0}],"formula":"default_zero(query2)"},{"alias":"UnHealth Host","conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":0}],"formula":"default_zero(query3)"}],"response_format":"scalar","queries":[{"query":"sum:aws.networkelb.active_flow_count{$env,$service} by {name}","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"max:aws.networkelb.healthy_host_count{$env,$service} by {name}","data_source":"metrics","name":"query2","aggregator":"max"},{"query":"max:aws.networkelb.un_healthy_host_count{$env,$service} by {name}","data_source":"metrics","name":"query3","aggregator":"max"}]}],"has_search_bar":"always"},"layout":{"x":0,"y":44,"width":6,"height":4}},{"id":5608974398269942,"definition":{"title":"ALB Current Status","title_size":"13","title_align":"center","time":{"live_span":"1mo"},"type":"query_table","requests":[{"formulas":[{"alias":"Connections","conditional_formats":[{"comparator":"=","palette":"white_on_red","value":0}],"formula":"default_zero(query1)","limit":{"count":500,"order":"asc"}},{"conditional_formats":[{"comparator":"=","palette":"white_on_yellow","value":0}],"alias":"Health Host","formula":"default_zero(query2)"},{"alias":"UnHealth Host","conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":0}],"formula":"default_zero(query3)"}],"response_format":"scalar","queries":[{"query":"sum:aws.applicationelb.active_connection_count{*,*} by {name}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"max:aws.applicationelb.healthy_host_count{*,*} by {name}","data_source":"metrics","name":"query2","aggregator":"max"},{"query":"max:aws.applicationelb.un_healthy_host_count{*,*} by {name}","data_source":"metrics","name":"query3","aggregator":"max"}]}],"has_search_bar":"always"},"layout":{"x":6,"y":44,"width":6,"height":4}}]},"layout":{"x":0,"y":7,"width":12,"height":49}},{"id":437732079137362,"definition":{"title":"컴퓨팅 리소스 사용률","background_color":"orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2497624761100998,"definition":{"title":"실시간 프로세스 CPU 사용률","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"15m"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"limit":100,"data_source":"process","name":"query1","query_filter":"","metric":"process.stat.cpu.total_pct","is_normalized_cpu":true}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":"y = 100","value":"y = 100","display_type":"error dashed"}]},"layout":{"x":0,"y":0,"width":6,"height":3}},{"id":4456892078420960,"definition":{"title":"실시간 프로세스 메모리 사용률","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"15m"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"limit":100,"data_source":"process","name":"query1","query_filter":"","metric":"process.stat.memory.rss.pct","is_normalized_cpu":true}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":"y = 100","value":"y = 100","display_type":"error dashed"}]},"layout":{"x":6,"y":0,"width":6,"height":3}},{"id":5026955391627454,"definition":{"title":"실시간 호스트 최대 CPU 사용률(name, image / 90% 기준)","type":"hostmap","requests":{"fill":{"q":"max:system.cpu.user{*} by {host}"},"size":{"q":"max:system.cpu.user{*} by {host}"}},"node_type":"host","no_metric_hosts":false,"no_group_hosts":true,"group":["name","image"],"scope":[],"style":{"palette":"green_to_orange","palette_flip":false,"fill_max":"90"}},"layout":{"x":0,"y":3,"width":12,"height":4}},{"id":2073332206362594,"definition":{"title":"호스트 최대 CPU 사용률(N/A: Fargate)","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"최대 CPU 사용률(1일 전)","formula":"100 - default_zero(day_before(query2))"},{"alias":"최대 CPU 사용률","conditional_formats":[{"comparator":"<","palette":"black_on_light_yellow","value":50},{"comparator":">","palette":"white_on_red","value":90},{"comparator":">","palette":"white_on_yellow","value":80},{"comparator":"<=","palette":"white_on_green","value":80}],"formula":"100 - default_zero(query3)"},{"alias":"전일대비","conditional_formats":[{"comparator":">","palette":"black_on_light_yellow","value":0}],"formula":"(100 - default_zero(day_before(query2))) - (100 - default_zero(query3))","limit":{"order":"desc","count":500}}],"queries":[{"data_source":"metrics","name":"query2","query":"min:system.cpu.idle{*,*} by {name,host,instance-type}","aggregator":"min"},{"data_source":"metrics","name":"query3","query":"min:system.cpu.idle{*,*} by {name,host,instance-type}","aggregator":"min"}]}]},"layout":{"x":0,"y":7,"width":6,"height":4}},{"id":5477566344098144,"definition":{"title":"호스트 최대 CPU 사용률","title_size":"13","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1w"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1 + query2"}],"queries":[{"query":"max:system.cpu.user{$env,$service} by {name,host,instance-type}","data_source":"metrics","name":"query1"},{"query":"max:system.cpu.system{$env,$service} by {name,host,instance-type}","data_source":"metrics","name":"query2"}],"response_format":"timeseries","style":{"palette":"blue","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":"y = 100","value":"y = 100","display_type":"error bold"}],"custom_links":[]},"layout":{"x":6,"y":7,"width":6,"height":4}},{"id":1583287787664586,"definition":{"title":"실시간 컨테이너 최대 CPU 사용률(container_name / 90% 기준)","type":"hostmap","requests":{"fill":{"q":"max:process.stat.container.cpu.total_pct{*} by {host}"},"size":{"q":"max:process.stat.container.cpu.total_pct{*} by {host}"}},"node_type":"container","no_metric_hosts":false,"no_group_hosts":true,"group":["container_name"],"scope":[],"style":{"palette":"green_to_orange","palette_flip":false,"fill_max":"90"}},"layout":{"x":0,"y":11,"width":12,"height":4}},{"id":6353432233994486,"definition":{"title":"컨테이너 최대 CPU 사용률","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"최대 CPU 사용량(1일 전)","formula":"day_before(query1)"},{"alias":"CPU 제한(1일 전)","formula":"day_before(query2)"},{"alias":"최대 CPU 사용량","formula":"query3"},{"alias":"CPU 제한","formula":"query4"},{"alias":"UPTIME","formula":"query5"},{"alias":"최대 CPU 사용률(1일 전)","cell_display_mode":"number","formula":"100 * (day_before(query1) / day_before(query2))"},{"alias":"최대 CPU 사용률","conditional_formats":[{"comparator":"<","palette":"black_on_light_yellow","value":50},{"comparator":">","palette":"white_on_red","value":90},{"comparator":">","palette":"white_on_yellow","value":80},{"comparator":"<=","palette":"white_on_green","value":80}],"formula":"100 * (query3 / query4)"},{"alias":"전일대비","conditional_formats":[{"comparator":">","palette":"black_on_light_yellow","value":0}],"formula":"(100 * (query3 / query4)) - (100 * (day_before(query1) / day_before(query2)))","limit":{"count":500,"order":"desc"}}],"queries":[{"query":"max:container.cpu.usage{$env,$service} by {container_name}.fill(zero).as_count()","data_source":"metrics","name":"query1","aggregator":"max"},{"query":"avg:container.cpu.limit{$env,$service} by {container_name}.fill(zero)","data_source":"metrics","name":"query2","aggregator":"max"},{"query":"max:container.cpu.usage{$env,$service} by {container_name}.fill(zero).as_count()","data_source":"metrics","name":"query3","aggregator":"max"},{"query":"avg:container.cpu.limit{$env,$service} by {container_name}.fill(zero)","data_source":"metrics","name":"query4","aggregator":"max"},{"query":"avg:container.uptime{$env,$service} by {container_name}","data_source":"metrics","name":"query5","aggregator":"avg"}]}]},"layout":{"x":0,"y":15,"width":6,"height":4}},{"id":6133497614015110,"definition":{"title":"컨테이너 CPU 평균 사용률","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"2d"},"type":"timeseries","requests":[{"formulas":[{"formula":"100 * (query1 / query2)"}],"queries":[{"query":"max:container.cpu.usage{$env,$service} by {container_name}.as_count()","data_source":"metrics","name":"query1"},{"query":"max:container.cpu.limit{$env,$service} by {container_name}","data_source":"metrics","name":"query2"}],"response_format":"timeseries","style":{"palette":"blue"},"display_type":"line"}],"markers":[{"label":"y = 100","value":"y = 100","display_type":"error bold"}],"custom_links":[]},"layout":{"x":6,"y":15,"width":6,"height":4}},{"id":8152244848829264,"definition":{"title":"실시간 호스트 최대 메모리 사용률(name, image / 90% 기준)","type":"hostmap","requests":{"fill":{"q":"max:system.mem.pct_usable{*} by {host}"},"size":{"q":"max:system.mem.pct_usable{*} by {host}"}},"node_type":"host","no_metric_hosts":false,"no_group_hosts":true,"group":["name","image"],"scope":[],"style":{"palette":"green_to_orange","palette_flip":false,"fill_max":"0.9"}},"layout":{"x":0,"y":19,"width":12,"height":4}},{"id":4395338598697330,"definition":{"title":"호스트 최대 메모리 사용률","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"최대 메모리 사용률(1일 전)","formula":"day_before(query2)"},{"alias":"최대 메모리 사용률","formula":"query1"},{"alias":"전일대비","conditional_formats":[{"comparator":">","palette":"black_on_light_yellow","value":0}],"formula":"query1 - day_before(query2)","limit":{"count":500,"order":"desc"}}],"queries":[{"data_source":"metrics","name":"query2","query":"max:system.mem.pct_usable{$env,$service} by {name,host,instance-type}","aggregator":"max"},{"data_source":"metrics","name":"query1","query":"max:system.mem.pct_usable{$env,$service} by {name,host,instance-type}","aggregator":"max"}]}]},"layout":{"x":0,"y":23,"width":6,"height":4}},{"id":5244709907776424,"definition":{"title":"호스트 평균 메모리 사용률","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1w"},"type":"timeseries","requests":[{"formulas":[{"alias":"최대 메모리 사용률","formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"max:system.mem.pct_usable{$env,$service} by {name,host,instance-type}"}],"response_format":"timeseries","style":{"palette":"blue","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":"y = 1","value":"y = 1","display_type":"error dashed"}]},"layout":{"x":6,"y":23,"width":6,"height":4}},{"id":1301415655321980,"definition":{"title":"실시간 컨테이너 메모리 사용률(container_name / 상대 기준)","type":"hostmap","requests":{"fill":{"q":"max:process.stat.container.memory.rss{*} by {host}"},"size":{"q":"max:process.stat.container.memory.rss{*} by {host}"}},"node_type":"container","no_metric_hosts":false,"no_group_hosts":true,"group":["container_name"],"scope":[],"style":{"palette":"green_to_orange","palette_flip":false,"fill_max":"auto"}},"layout":{"x":0,"y":27,"width":12,"height":4}},{"id":5509436343262766,"definition":{"title":"컨테이너 최대 메모리 사용률","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"최대 메모리 사용량(1일 전)","formula":"day_before(query1)"},{"alias":"메모리 제한(1일 전)","formula":"day_before(query2)"},{"alias":"최대 메모리 사용량","formula":"query3"},{"alias":"메모리 제한","formula":"query4"},{"alias":"UPTIME","formula":"query5"},{"alias":"최대 메모리사용률(1일 전)","cell_display_mode":"number","formula":"100 * (day_before(query1) / day_before(query2))"},{"alias":"최대 메모리 사용률","conditional_formats":[{"comparator":"<","palette":"black_on_light_yellow","value":50},{"comparator":">","palette":"white_on_red","value":90},{"comparator":">","palette":"white_on_yellow","value":80},{"comparator":"<=","palette":"white_on_green","value":80}],"formula":"100 * (query3 / query4)"},{"alias":"전일대비","conditional_formats":[{"comparator":">","palette":"black_on_light_yellow","value":0}],"formula":"(100 * (query3 / query4)) - (100 * (day_before(query1) / day_before(query2)))","limit":{"count":500,"order":"desc"}}],"queries":[{"query":"max:container.memory.usage{$env,$service} by {container_name}.fill(zero)","data_source":"metrics","name":"query1","aggregator":"max"},{"query":"avg:container.memory.limit{$env,$service} by {container_name}.fill(zero)","data_source":"metrics","name":"query2","aggregator":"max"},{"query":"max:container.memory.usage{$env,$service} by {container_name}.fill(zero)","data_source":"metrics","name":"query3","aggregator":"max"},{"query":"avg:container.memory.limit{$env,$service} by {container_name}.fill(zero)","data_source":"metrics","name":"query4","aggregator":"max"},{"query":"avg:container.uptime{$env,$service} by {container_name}.fill(zero)","data_source":"metrics","name":"query5","aggregator":"max"}]}]},"layout":{"x":0,"y":31,"width":6,"height":4}},{"id":2935273683174630,"definition":{"title":"컨테이너 CPU 메모리 사용률","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1w"},"type":"timeseries","requests":[{"formulas":[{"formula":"100 * (query1 / query2)"}],"queries":[{"query":"max:container.memory.usage{$env,$service} by {container_name}","data_source":"metrics","name":"query1"},{"query":"max:container.memory.limit{$env,$service} by {container_name}","data_source":"metrics","name":"query2"}],"response_format":"timeseries","style":{"palette":"blue"},"display_type":"line"}],"yaxis":{"include_zero":true,"max":"auto"},"markers":[{"label":"y = 100","value":"y = 100","display_type":"error bold"}],"custom_links":[]},"layout":{"x":6,"y":31,"width":6,"height":4}},{"id":844242261887402,"definition":{"title":"호스트 네트워크 인/아웃바운드 평균 사용률","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"scatterplot","requests":{"table":{"response_format":"scalar","formulas":[{"dimension":"x","alias":"네트워크 인바운드","formula":"query1"},{"dimension":"y","alias":"네트워크 아웃바운드","formula":"query2"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:system.net.bytes_rcvd{$env,$service} by {name,host,instance-type,device}","aggregator":"avg"},{"data_source":"metrics","name":"query2","query":"avg:system.net.bytes_sent{$env,$service} by {name,host,instance-type,device}","aggregator":"avg"}]}}},"layout":{"x":0,"y":35,"width":12,"height":4}},{"id":1046282896139810,"definition":{"title":"호스트 네트워크 인바운드 평균 사용률","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1w"},"type":"timeseries","requests":[{"formulas":[{"alias":"평균 네트워크 IN 사용률","formula":"query2"}],"queries":[{"query":"avg:system.net.bytes_rcvd{$env,$service} by {name,host,instance-type,device}","data_source":"metrics","name":"query2"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":39,"width":6,"height":4}},{"id":2341585619774110,"definition":{"title":"호스트 네트워크 아웃바운드 평균 사용률","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1w"},"type":"timeseries","requests":[{"formulas":[{"alias":"평균 네트워크 IN 사용률","formula":"query2"}],"queries":[{"query":"avg:system.net.bytes_sent{$env,$service} by {name,host,instance-type,device}","data_source":"metrics","name":"query2"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":39,"width":6,"height":4}},{"id":6837136518458668,"definition":{"title":"Disk 사용률 (%) / EFS 제외","title_size":"13","title_align":"center","time":{"live_span":"1d"},"type":"query_table","requests":[{"formulas":[{"alias":"Used","formula":"query2"},{"alias":"Total","formula":"query3"},{"alias":"Used (%)","cell_display_mode":"bar","conditional_formats":[{"comparator":">=","value":9,"palette":"white_on_red"}],"formula":"query4","limit":{"count":500,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"avg:system.disk.used{!device:fs*,$env,$service} by {name,host,instance-type,device}","data_source":"metrics","name":"query2","aggregator":"avg"},{"query":"avg:system.disk.total{!device:fs*,$env,$service} by {name,host,instance-type,device}","data_source":"metrics","name":"query3","aggregator":"avg"},{"query":"avg:system.disk.in_use{!device:fs*,$env,$service} by {name,host,instance-type,device}","data_source":"metrics","name":"query4","aggregator":"avg"},{"query":"avg:system.disk.in_use{!device:fs*,$env,$service} by {name,host,instance-type,device}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":0,"y":43,"width":6,"height":3}},{"id":8642341355722384,"definition":{"title":"Disk 사용률(Forecast)","title_size":"13","title_align":"center","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1w"},"type":"timeseries","requests":[{"formulas":[{"alias":"Used (%)","formula":"forecast(query4, 'linear', 1)"}],"queries":[{"query":"avg:system.disk.in_use{!device:fs*,$env,$service} by {name,host,instance-type,device}","data_source":"metrics","name":"query4"},{"query":"avg:system.disk.used{!device:fs*,$env,$service} by {name,host,instance-type,device}","data_source":"metrics","name":"query2"},{"query":"avg:system.disk.total{!device:fs*,$env,$service} by {name,host,instance-type,device}","data_source":"metrics","name":"query3"},{"query":"avg:system.disk.in_use{!device:fs*,$env,$service} by {name,host,instance-type,device}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":"y = 1","value":"y = 1","display_type":"error bold"}]},"layout":{"x":6,"y":43,"width":6,"height":3}},{"id":2160507795130864,"definition":{"title":"CPU I/O wait (%, by host) > Disk 성능 증가 권장","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"system.cpu.iowait{$env,$service} by {name,host,instance-type}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":46,"width":6,"height":2}},{"id":535553800865362,"definition":{"title":"Disk latency (ms, by device) > Disk 또는 네트워크 성능 증가 권장","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"system.io.await{$env,$service} by {name,host,instance-type}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":46,"width":6,"height":2}},{"id":5258884286121698,"definition":{"title":"Disk read (kb/s, by device)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"system.io.rkb_s{$env,$service} by {name,host,instance-type,device}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":48,"width":6,"height":2}},{"id":5884704599561248,"definition":{"title":"Disk write (kb/s, by device)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"system.io.wkb_s{$env,$service} by {name,host,instance-type,device}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":48,"width":6,"height":2}},{"id":7080744107763512,"definition":{"title":"Write rate (per sec, by device)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"system.io.w_s{$env,$service} by {name,host,instance-type,device}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":50,"width":4,"height":2}},{"id":6591640430703684,"definition":{"title":"Read rate (per sec, by device)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"system.io.r_s{$env,$service} by {name,host,instance-type,device}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":50,"width":4,"height":2}},{"id":3471837957906790,"definition":{"title":"Disk CPU util (%)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"system.io.util{$env,$service} by {name,host,instance-type,device}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":50,"width":4,"height":2}},{"id":2643863314969172,"definition":{"type":"free_text","text":"EBS Metrics","color":"#4d4d4d","font_size":"auto","text_align":"left"},"layout":{"x":0,"y":52,"width":12,"height":1}},{"id":5454877790256632,"definition":{"title":"Reads, by device (ops per minute)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"aws.ebs.volume_read_ops{$env,$service} by {name,host,instance-type,device,volume-type}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":53,"width":6,"height":2}},{"id":699561365979254,"definition":{"title":"Read time, by device (sec per op)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.ebs.volume_total_read_time{$env,$service} by {name,host,instance-type,device,volume-type}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":53,"width":6,"height":2}},{"id":8129436952039006,"definition":{"title":"Writes, by device (ops per minute)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.ebs.volume_write_ops{$env,$service} by {name,host,instance-type,device,volume-type}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":55,"width":6,"height":2}},{"id":3202377377139568,"definition":{"title":"Write time, by device (sec per op)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.ebs.volume_total_write_time{$env,$service} by {name,host,instance-type,device,volume-type}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":55,"width":6,"height":2}},{"id":5591969987998980,"definition":{"title":"Disk bytes read, by device (bytes per sec)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.ebs.volume_read_bytes{$env,$service} by {name,host,instance-type,device,volume-type}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":57,"width":4,"height":2}},{"id":1536982309349886,"definition":{"title":"Disk bytes written, by device (bytes per sec)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.ebs.volume_write_bytes.sum{$env,$service} by {name,host,instance-type,device,volume-type}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":57,"width":4,"height":2}},{"id":4581330178082920,"definition":{"title":"Queue length, by device (ops)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.ebs.volume_queue_length{$env,$service} by {name,host,instance-type,device,volume-type}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":57,"width":4,"height":2}}]},"layout":{"x":0,"y":56,"width":12,"height":60}},{"id":4511386829586260,"definition":{"title":"API Gateway 메트릭","background_color":"orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3152672768078218,"definition":{"title":"Request Count by API","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"sum:aws.apigateway.count{$env,$service} by {aws_account,apiname,stage}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":6,"height":2}},{"id":6440108503523740,"definition":{"title":"p95 Latency by API","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.apigateway.latency.p95{$env,$service} by {aws_account,apiname,stage}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":0,"width":6,"height":2}},{"id":2689687445065238,"definition":{"title":"Top API's by Error Rate","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"(query1 + query2) / query3","limit":{"count":10,"order":"desc"}}],"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":0.1},{"comparator":">","palette":"white_on_red","value":0.9},{"comparator":">","palette":"white_on_yellow","value":0.1}],"response_format":"scalar","queries":[{"query":"sum:aws.apigateway.5xxerror{$env,$service} by {aws_account,apiname,stage}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:aws.apigateway.4xxerror{$env,$service} by {aws_account,apiname,stage}.as_count()","data_source":"metrics","name":"query2","aggregator":"sum"},{"query":"sum:aws.apigateway.count{$env,$service} by {aws_account,apiname,stage}.as_count()","data_source":"metrics","name":"query3","aggregator":"sum"}]}],"style":{}},"layout":{"x":0,"y":2,"width":6,"height":2}},{"id":8293026794441860,"definition":{"title":"Slowest API's (p95)","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"conditional_formats":[{"comparator":">=","palette":"white_on_red","value":1000},{"comparator":"<","palette":"white_on_green","value":100},{"comparator":"<=","palette":"white_on_yellow","value":1000}],"response_format":"scalar","queries":[{"query":"avg:aws.apigateway.latency.p95{$env,$service} by {aws_account,apiname,stage}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"style":{}},"layout":{"x":6,"y":2,"width":6,"height":2}},{"id":4208756365186246,"definition":{"title":"Cache Hit Count by API","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"sum:aws.apigateway.cache_hit_count{$env,$service} by {aws_account,apiname,stage}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":4,"width":6,"height":2}},{"id":1497547414656312,"definition":{"title":"Cache Miss Count by API","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"sum:aws.apigateway.cache_miss_count{$env,$service} by {aws_account,apiname,stage}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":4,"width":6,"height":2}},{"id":8554178645611846,"definition":{"title":"Request Count by Endpoint, Method","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"sum:aws.apigateway.count{$env,$service} by {aws_account,apiname,stage,method}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":6,"width":6,"height":2}},{"id":4427169226232416,"definition":{"title":"p95 Latency by Endpoint, Method","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.apigateway.latency.p95{$env,$service} by {aws_account,apiname,stage,method}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":6,"width":6,"height":2}},{"id":5395620410265296,"definition":{"title":"4xx Error Count by Endpoint, Method","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.apigateway.4xxerror{$env,$service} by {aws_account,apiname,stage,method}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":8,"width":6,"height":2}},{"id":2294459197812370,"definition":{"title":"5xx Error Count by Endpoint, Method","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.apigateway.5xxerror{$env,$service} by {aws_account,apiname,stage,method}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":8,"width":6,"height":2}},{"id":4937784667068282,"definition":{"title":"Top Operations by Error Rate","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"(query1 + query2) / query3","limit":{"count":10,"order":"desc"}}],"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":0.1},{"comparator":">","palette":"white_on_red","value":0.9},{"comparator":">","palette":"white_on_yellow","value":0.1}],"response_format":"scalar","queries":[{"query":"sum:aws.apigateway.5xxerror{$env,$service} by {aws_account,apiname,stage,method}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:aws.apigateway.4xxerror{$env,$service} by {aws_account,apiname,stage,method}.as_count()","data_source":"metrics","name":"query2","aggregator":"sum"},{"query":"sum:aws.apigateway.count{$env,$service} by {aws_account,apiname,stage,method}.as_count()","data_source":"metrics","name":"query3","aggregator":"sum"}]}],"style":{}},"layout":{"x":0,"y":10,"width":6,"height":2}},{"id":4493223736468996,"definition":{"title":"Slowest API Endpoints (p95)","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"conditional_formats":[{"comparator":">=","palette":"white_on_red","value":1000},{"comparator":"<","palette":"white_on_green","value":100},{"comparator":"<=","palette":"white_on_yellow","value":1000}],"response_format":"scalar","queries":[{"query":"avg:aws.apigateway.latency.p95{$env,$service} by {aws_account,apiname,stage,method}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"style":{}},"layout":{"x":6,"y":10,"width":6,"height":2}}]},"layout":{"x":0,"y":116,"width":12,"height":13}},{"id":3260223294075838,"definition":{"title":"CloudFront 현황","background_color":"orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2180949046292102,"definition":{"title":"CloudFront 트래픽","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"현재","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.cloudfront.bytes_downloaded{$env,$service} by {aws_account,distributionid,resource_name}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"alias":"7일 전","formula":"week_before(query0)"}],"response_format":"timeseries","queries":[{"query":"sum:aws.cloudfront.bytes_downloaded{$env,$service} by {aws_account,distributionid,resource_name}.as_count()","data_source":"metrics","name":"query0"}],"style":{"palette":"dog_classic","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":false},"markers":[]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":5112111649458486,"definition":{"title":"CloudFront 요청수","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"현재","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.cloudfront.requests{$env,$service} by {aws_account,distributionid,resource_name}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"alias":"7일 전","formula":"week_before(query0)"}],"response_format":"timeseries","queries":[{"query":"sum:aws.cloudfront.requests{$env,$service} by {aws_account,distributionid,resource_name}.as_count()","data_source":"metrics","name":"query0"}],"style":{"palette":"dog_classic","line_type":"dotted","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":6123616105906316,"definition":{"title":"CloudFront 에러율","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"현재","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.cloudfront.total_error_rate{$env,$service} by {aws_account,distributionid,resource_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"alias":"7일 전","formula":"week_before(query0)"}],"response_format":"timeseries","queries":[{"query":"sum:aws.cloudfront.total_error_rate{$env,$service} by {aws_account,distributionid,resource_name}","data_source":"metrics","name":"query0"}],"style":{"palette":"dog_classic","line_type":"dotted","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":false},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":2}}]},"layout":{"x":0,"y":129,"width":12,"height":3}},{"id":859181244098724,"definition":{"title":"네트워크 로드밸런서 현황","background_color":"orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":4193236631407910,"definition":{"title":"NLB Current Status","title_size":"13","title_align":"center","time":{"live_span":"15m"},"type":"query_table","requests":[{"formulas":[{"alias":"Connections","formula":"query1","limit":{"count":500,"order":"desc"}},{"alias":"Conn Errors","formula":"default_zero(query3)"},{"alias":"Healthy Hosts","conditional_formats":[{"comparator":">","palette":"white_on_green","value":0},{"comparator":"=","palette":"white_on_red","value":0}],"formula":"default_zero(query2)"},{"alias":"Unhealthy Hosts","conditional_formats":[{"comparator":">","palette":"white_on_red","value":0},{"comparator":"=","palette":"white_on_green","value":0}],"formula":"default_zero(query4)"}],"response_format":"scalar","queries":[{"query":"sum:aws.networkelb.active_flow_count{$env,$service} by {name}.weighted()","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:aws.networkelb.client_tlsnegotiation_error_count{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query3","aggregator":"sum"},{"query":"max:aws.networkelb.healthy_host_count{$env,$service} by {name}","data_source":"metrics","name":"query2","aggregator":"max"},{"query":"max:aws.networkelb.un_healthy_host_count{$env,$service} by {name}","data_source":"metrics","name":"query4","aggregator":"max"}]}],"has_search_bar":"always"},"layout":{"x":0,"y":0,"width":12,"height":4}},{"id":5190470111117718,"definition":{"title":"NLB Active Flow Count","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.networkelb.active_flow_count{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[{"value":"y = 0","display_type":"error dashed"}]},"layout":{"x":0,"y":4,"width":4,"height":3}},{"id":5939882242842910,"definition":{"title":"Healthy Host Count","title_size":"13","title_align":"center","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"min:aws.networkelb.healthy_host_count{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":4,"width":4,"height":3}},{"id":4462182999590122,"definition":{"title":"Unhealthy Host Count","title_size":"13","title_align":"center","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"min:aws.networkelb.un_healthy_host_count{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":4,"width":4,"height":3}},{"id":8768501251534538,"definition":{"title":"Bytes Processed","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.networkelb.processed_bytes{$env,$service} by {name}.as_rate()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"custom_links":[]},"layout":{"x":0,"y":7,"width":6,"height":2}},{"id":7901435820301336,"definition":{"title":"Conn Errors","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.networkelb.client_tlsnegotiation_error_count{$env,$service} by {name}.as_rate()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"custom_links":[]},"layout":{"x":6,"y":7,"width":6,"height":2}}]},"layout":{"x":0,"y":132,"width":12,"height":10}},{"id":2405574086588174,"definition":{"title":"애플리케이션 로드밸런서 현황","background_color":"orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2694048898944548,"definition":{"title":"NLB Current Status","title_size":"13","title_align":"center","time":{"live_span":"15m"},"type":"query_table","requests":[{"formulas":[{"alias":"Connections","formula":"default_zero(query1)","limit":{"count":500,"order":"desc"}},{"alias":"Conn Errors","formula":"default_zero(query3)"},{"alias":"Healthy Hosts","conditional_formats":[{"comparator":">","palette":"white_on_green","value":0},{"comparator":"=","palette":"white_on_red","value":0}],"formula":"query2"},{"alias":"Unhealthy Hosts","conditional_formats":[{"comparator":">","palette":"white_on_red","value":0},{"comparator":"=","palette":"white_on_green","value":0}],"formula":"query4"}],"response_format":"scalar","queries":[{"query":"sum:aws.applicationelb.active_connection_count{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"},{"query":"sum:aws.applicationelb.client_tlsnegotiation_error_count{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query3","aggregator":"sum"},{"query":"max:aws.applicationelb.healthy_host_count{$env,$service} by {name}","data_source":"metrics","name":"query2","aggregator":"max"},{"query":"max:aws.applicationelb.un_healthy_host_count{$env,$service} by {name}","data_source":"metrics","name":"query4","aggregator":"max"}]}],"has_search_bar":"always"},"layout":{"x":0,"y":0,"width":12,"height":4}},{"id":1842408357666198,"definition":{"title":"ALB Active Flow Count","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"sum:aws.applicationelb.active_connection_count{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[{"value":"y = 0","display_type":"error dashed"}]},"layout":{"x":0,"y":4,"width":4,"height":3}},{"id":2707840421979392,"definition":{"title":"Healthy Host Count","title_size":"13","title_align":"center","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"min:aws.applicationelb.healthy_host_count{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":4,"width":4,"height":3}},{"id":8181350662872850,"definition":{"title":"Unhealthy Host Count","title_size":"13","title_align":"center","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"min:aws.applicationelb.un_healthy_host_count{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":4,"width":4,"height":3}},{"id":6198085166281358,"definition":{"title":"Request Count (Sum)","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"sum:aws.applicationelb.request_count{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":0,"y":7,"width":12,"height":2}},{"id":8859535490887412,"definition":{"title":"HTTP 2xx Responses","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"sum:aws.applicationelb.httpcode_target_2xx{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":0,"y":9,"width":3,"height":2}},{"id":8710266569817394,"definition":{"title":"HTTP 4xx Responses","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"sum:aws.applicationelb.httpcode_target_4xx{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"warm"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":3,"y":9,"width":4,"height":2}},{"id":7128622236223908,"definition":{"title":"HTTP 5xx Responses","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"sum:aws.applicationelb.httpcode_target_5xx{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"warm"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":7,"y":9,"width":5,"height":2}},{"id":3091817707128716,"definition":{"title":"Response Time","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.applicationelb.target_response_time.average{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":0,"y":11,"width":12,"height":2}}]},"layout":{"x":0,"y":142,"width":12,"height":14}},{"id":6441203345162476,"definition":{"title":"RDS 현황","background_color":"orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":889426132351206,"definition":{"title":"RDS Current Status","time":{"live_span":"15m"},"type":"query_table","requests":[{"formulas":[{"alias":"CPU","conditional_formats":[{"palette":"white_on_green","value":70,"comparator":"<"},{"palette":"white_on_yellow","value":90,"comparator":"<"},{"palette":"white_on_red","value":90,"comparator":">="}],"formula":"query1","limit":{"count":500,"order":"desc"}},{"alias":"Free MEM","cell_display_mode":"bar","formula":"query2"},{"alias":"Connections","formula":"query3"},{"alias":"Latency","formula":"query4"}],"response_format":"scalar","queries":[{"query":"avg:aws.rds.cpuutilization{$env,$service} by {name}","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"avg:aws.rds.freeable_memory{$env,$service} by {name}","data_source":"metrics","name":"query2","aggregator":"avg"},{"query":"avg:aws.rds.database_connections{$env,$service} by {name}","data_source":"metrics","name":"query3","aggregator":"avg"},{"query":"avg:aws.rds.read_latency{$env,$service} by {name}","data_source":"metrics","name":"query4","aggregator":"avg"}]}],"has_search_bar":"always"},"layout":{"x":0,"y":0,"width":12,"height":4}},{"id":741798545778508,"definition":{"title":"RDS CPU Usage (%)","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"queries":[{"query":"max:aws.rds.cpuutilization{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":4,"width":6,"height":3}},{"id":744463968150538,"definition":{"title":"RDS DB Load CPU","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"queries":[{"query":"max:aws.rds.dbload_cpu{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":4,"width":6,"height":3}},{"id":7627891818656570,"definition":{"title":"RDS Read Latency","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"queries":[{"query":"max:aws.rds.read_latency{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":7,"width":6,"height":3}},{"id":5568327739605752,"definition":{"title":"RDS Write Latency","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"queries":[{"query":"max:aws.rds.write_latency{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":7,"width":6,"height":3}},{"id":5375027949249010,"definition":{"title":"RDS Free Memory","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"queries":[{"query":"max:aws.rds.freeable_memory{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":10,"width":6,"height":3}},{"id":3500680094291756,"definition":{"title":"RDS DB Connections","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"queries":[{"query":"max:aws.rds.database_connections{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":10,"width":6,"height":3}},{"id":4869139402742676,"definition":{"title":"RDS Read IOPS","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"queries":[{"query":"max:aws.rds.read_iops{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":13,"width":6,"height":3}},{"id":2169779715410378,"definition":{"title":"RDS Write IOPS","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"queries":[{"query":"max:aws.rds.write_iops{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":13,"width":6,"height":3}},{"id":8773829315113358,"definition":{"title":"RDS Replica Lag","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"queries":[{"query":"max:aws.rds.replica_lag{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":16,"width":6,"height":3}},{"id":7134269303193434,"definition":{"title":"RDS DB Swap Usage","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"queries":[{"query":"max:aws.rds.swap_usage{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":16,"width":6,"height":3}}]},"layout":{"x":0,"y":156,"width":12,"height":20,"is_column_break":true}},{"id":3061963248320002,"definition":{"title":"ElastiCache 현황","background_color":"orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":7825792297054330,"definition":{"title":"ElastiCache CPU Utilization","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.elasticache.cpuutilization{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":0,"width":6,"height":3}},{"id":5874920991821422,"definition":{"title":"ElastiCache Engine CPU Utilization","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.elasticache.engine_cpuutilization{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":0,"width":6,"height":3}},{"id":3903627149821140,"definition":{"title":"ElastiCache Freeable Memory","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.elasticache.freeable_memory{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":3,"width":6,"height":3}},{"id":6517646632508912,"definition":{"title":"ElastiCache Swap Usage","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.elasticache.swap_usage{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":3,"width":6,"height":3}},{"id":1226979768854970,"definition":{"title":"ElastiCache Cache Hits","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.elasticache.cache_hits{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":6,"width":6,"height":3}},{"id":2428771654803666,"definition":{"title":"ElastiCache Cache Hit Rate","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.elasticache.cache_hit_rate{$env,$service} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":6,"width":6,"height":3}},{"id":93334360030936,"definition":{"title":"ElastiCache Get Type Cmds","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.elasticache.get_type_cmds{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":9,"width":6,"height":3}},{"id":4109035156171952,"definition":{"title":"ElastiCache Set Type Cmds","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.elasticache.set_type_cmds{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":9,"width":6,"height":3}},{"id":30445373547354,"definition":{"title":"ElastiCache Key Base Cmds","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.elasticache.key_based_cmds{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":12,"width":6,"height":3}},{"id":5284422409087952,"definition":{"title":"ElastiCache Hash Base Cmds","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.elasticache.hash_based_cmds{$env,$service} by {name}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":12,"width":6,"height":3}}]},"layout":{"x":0,"y":176,"width":12,"height":16}},{"id":6699667198166370,"definition":{"title":"오브젝트/네트워크 스토리지 현황","background_color":"orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":5117469018437454,"definition":{"title":"S3 Current Status","title_size":"13","title_align":"center","time":{"live_span":"1d"},"type":"query_table","requests":[{"formulas":[{"alias":"사용량(1달 전)","cell_display_mode":"bar","formula":"default_zero(month_before(query1))"},{"alias":"사용량","cell_display_mode":"bar","formula":"default_zero(query2)","limit":{"count":500,"order":"desc"}},{"alias":"전월대비","cell_display_mode":"bar","conditional_formats":[{"comparator":">","palette":"black_on_light_yellow","value":0}],"formula":"default_zero(query2) - default_zero(month_before(query1))"}],"response_format":"scalar","queries":[{"query":"avg:aws.s3.bucket_size_bytes{$env,$service} by {aws_account,bucketname,storagetype}","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"avg:aws.s3.bucket_size_bytes{$env,$service} by {aws_account,bucketname,storagetype}","data_source":"metrics","name":"query2","aggregator":"avg"}]}]},"layout":{"x":0,"y":0,"width":12,"height":3}},{"id":7081462513213322,"definition":{"title":"S3 Bucket Size","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1mo"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.s3.bucket_size_bytes{$env,$service} by {aws_account,bucketname,storagetype}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":3,"width":6,"height":3}},{"id":6349590447020218,"definition":{"title":"S3 Objects","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1mo"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.s3.number_of_objects{$env,$service} by {aws_account,bucketname,storagetype}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":3,"width":6,"height":3}},{"id":6958682092668916,"definition":{"title":"EFS Current Status","title_size":"13","title_align":"center","time":{"live_span":"1d"},"type":"query_table","requests":[{"formulas":[{"alias":"사용량(1달 전)","cell_display_mode":"bar","formula":"month_before(query1)"},{"alias":"사용량","cell_display_mode":"bar","formula":"query2","limit":{"count":500,"order":"desc"}},{"cell_display_mode":"bar","conditional_formats":[{"comparator":">","palette":"black_on_light_yellow","value":0}],"formula":"query2 - month_before(query1)"}],"response_format":"scalar","queries":[{"query":"max:aws.efs.storage_bytes{$env,$service} by {aws_account,name,filesystemid,storageclass}","data_source":"metrics","name":"query1","aggregator":"max"},{"query":"max:aws.efs.storage_bytes{$env,$service} by {aws_account,name,filesystemid,storageclass}","data_source":"metrics","name":"query2","aggregator":"max"}]}]},"layout":{"x":0,"y":6,"width":12,"height":3}},{"id":4344394332509078,"definition":{"title":"EFS 사용량","title_size":"13","title_align":"center","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1mo"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"max:aws.efs.storage_bytes{$env,$service} by {aws_account,name,filesystemid,storageclass}","data_source":"metrics","name":"query2"}],"formulas":[{"formula":"query2","alias":"사용량"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":9,"width":4,"height":3}},{"id":5474916821486622,"definition":{"title":"EFS Burst Credit Balance","title_size":"13","title_align":"center","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.efs.burst_credit_balance{$env,$service} by {aws_account,name,filesystemid}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":9,"width":4,"height":3}},{"id":5973995405683656,"definition":{"title":"EFS Client Connections","title_size":"13","title_align":"center","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"sum:aws.efs.total_iobytes{$env,$service} by {aws_account,name,filesystemid,storageclass}.as_count().rollup(sum)","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":9,"width":4,"height":3}},{"id":8813593533339200,"definition":{"title":"EFS Total I/O Bytes","title_size":"13","title_align":"center","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"EFS Total I/O Bytes","formula":"query1"}],"queries":[{"query":"sum:aws.efs.total_iobytes{$env,$service} by {aws_account,name,filesystemid,storageclass}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":12,"width":6,"height":3}},{"id":2867629830041074,"definition":{"title":"EFS Meta I/O Bytes","title_size":"13","title_align":"center","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"EFS Meta I/O Bytes","formula":"query4"}],"queries":[{"query":"sum:aws.efs.metadata_iobytes{$env,$service} by {aws_account,name,filesystemid,storageclass}.as_count()","data_source":"metrics","name":"query4"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":12,"width":6,"height":3}},{"id":1197970496642090,"definition":{"title":"EFS Read I/O Bytes","title_size":"13","title_align":"center","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"EFS Read I/O Bytes","formula":"query2"}],"queries":[{"query":"sum:aws.efs.data_read_iobytes{$env,$service} by {aws_account,name,filesystemid,storageclass}.as_count()","data_source":"metrics","name":"query2"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":15,"width":6,"height":3}},{"id":5932526995846308,"definition":{"title":"EFS Write I/O Bytes","title_size":"13","title_align":"center","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"EFS Write I/O Bytes","formula":"query3"}],"queries":[{"query":"sum:aws.efs.data_write_iobytes{$env,$service} by {aws_account,name,filesystemid,storageclass}.as_count()","data_source":"metrics","name":"query3"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":6,"y":15,"width":6,"height":3}}]},"layout":{"x":0,"y":192,"width":12,"height":19}},{"id":8536823380239066,"definition":{"title":"메트릭 모니터링 알람","background_color":"orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[]},"layout":{"x":0,"y":211,"width":12,"height":1}}],"template_variables":[{"name":"env","prefix":"env","available_values":[],"default":"*"},{"name":"service","prefix":"service","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed"}