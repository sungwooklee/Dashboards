{"title":"Custom Metric Usage Monitoring","description":"datadog_demo_keep:true\n\ndemo sungwook - demo","widgets":[{"id":2566341087214814,"definition":{"title":"Ingested Custom Metric","background_color":"vivid_green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":1349351754226192,"definition":{"title":"Total Ingested Custom Metric","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.estimated_usage.metrics.custom.ingested{*}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":8,"height":4}},{"id":8458363225619923,"definition":{"title":"Ingested Custom Metric by Metric Name","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.estimated_usage.metrics.custom.ingested.by_metric{*} by {metric_name}","aggregator":"avg"}],"formulas":[{"formula":"query1"}],"sort":{"count":25,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"style":{}},"layout":{"x":8,"y":0,"width":4,"height":4}}]},"layout":{"x":0,"y":0,"width":12,"height":5}},{"id":2410880507478834,"definition":{"title":"Index Custom Metric","background_color":"vivid_green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":5911710191459632,"definition":{"title":"Total Custom Metric","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.estimated_usage.metrics.custom{*}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":8,"height":4}},{"id":4803369593058316,"definition":{"title":"Custom Metric by Metric Name","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}","aggregator":"avg"}],"formulas":[{"formula":"query1"}],"sort":{"count":25,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"style":{}},"layout":{"x":8,"y":0,"width":4,"height":4}},{"id":6839760730954912,"definition":{"title":"CM 변화 트랜드(하루단위 TOP100)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 100, 'mean', 'desc')"}],"queries":[{"query":"sum:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":0,"y":4,"width":12,"height":5}},{"id":5513813398295632,"definition":{"title":"CM 변화 트랜드(전날 대비)","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"sum:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}","data_source":"metrics","name":"query2","aggregator":"avg"}],"sort":{"count":500,"order_by":[{"type":"formula","index":2,"order":"desc"}]},"formulas":[{"alias":"현재 트랜드","formula":"query1"},{"alias":"하루전","formula":"calendar_shift(query2, '-1d', 'Asia/Seoul')"},{"alias":"변화트랜드","cell_display_mode":"number","conditional_formats":[{"type":"range","palette":"transparent_to_red"}],"formula":"query1 - calendar_shift(query2, '-1d', 'Asia/Seoul')"}]}],"has_search_bar":"always"},"layout":{"x":0,"y":9,"width":12,"height":4}}]},"layout":{"x":0,"y":5,"width":12,"height":14}},{"id":6454158211425698,"definition":{"title":"\b변화 트랜드 상세정보","background_color":"vivid_orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2707124581912226,"definition":{"title":"CM 변화 트랜드(하루단위 TOP100)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"3mo"},"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 100, 'mean', 'desc')"}],"queries":[{"query":"avg:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}.rollup(avg, 86400)","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":0,"y":0,"width":12,"height":5}},{"id":8330694242486162,"definition":{"title":"CM 변화 트랜드(1달전 대비)","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","queries":[{"query":"avg:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}.rollup(avg, 86400)","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"avg:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}.rollup(avg, 86400)","data_source":"metrics","name":"query2","aggregator":"avg"}],"sort":{"count":500,"order_by":[{"type":"formula","index":2,"order":"desc"}]},"formulas":[{"alias":"현재 트랜드","formula":"query1"},{"alias":"4주전","formula":"calendar_shift(query2, '-4w', 'UTC')"},{"alias":"변화트랜드","formula":"query1 - calendar_shift(query2, '-4w', 'UTC')","conditional_formats":[{"type":"range","palette":"transparent_to_red"}],"cell_display_mode":"number"}]}],"has_search_bar":"always"},"layout":{"x":0,"y":5,"width":6,"height":6}},{"id":2112718839778878,"definition":{"title":"CM 변화 트랜드(3달전 대비)","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","queries":[{"query":"avg:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}.rollup(avg, 86400)","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"avg:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}.rollup(avg, 86400)","data_source":"metrics","name":"query2","aggregator":"avg"}],"sort":{"count":500,"order_by":[{"type":"formula","index":2,"order":"desc"}]},"formulas":[{"alias":"현재 트랜드","formula":"query1"},{"alias":"3개월전","formula":"timeshift(query2, -7776000)"},{"alias":"변화트랜드","cell_display_mode":"number","conditional_formats":[{"type":"range","palette":"transparent_to_red"}],"formula":"query1 - timeshift(query2, -7776000)"}]}],"has_search_bar":"always"},"layout":{"x":6,"y":5,"width":6,"height":6}},{"id":8515989359564310,"definition":{"title":"CM 변화 트랜드(한주전 대비 Increase)","title_size":"16","title_align":"left","type":"change","requests":[{"formulas":[{"formula":"week_before(query1)"},{"formula":"query1","alias":"변화 트랜드"}],"queries":[{"query":"avg:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}.rollup(avg, 86400)","data_source":"metrics","name":"query1","aggregator":"avg"}],"response_format":"scalar","increase_good":true,"order_by":"change","order_dir":"desc"}]},"layout":{"x":0,"y":11,"width":6,"height":3}},{"id":2739743880420384,"definition":{"title":"CM 변화 트랜드(한주전 대비 Decrease)","title_size":"16","title_align":"left","type":"change","requests":[{"formulas":[{"formula":"week_before(query1)"},{"formula":"query1","alias":"변화 트랜드"}],"queries":[{"query":"avg:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}.rollup(avg, 86400)","data_source":"metrics","name":"query1","aggregator":"avg"}],"response_format":"scalar","increase_good":true,"order_by":"change","order_dir":"asc"}]},"layout":{"x":6,"y":11,"width":6,"height":3}}]},"layout":{"x":0,"y":0,"width":12,"height":15,"is_column_break":true}}],"template_variables":[{"name":"metric_name","prefix":"metric_name","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed"}